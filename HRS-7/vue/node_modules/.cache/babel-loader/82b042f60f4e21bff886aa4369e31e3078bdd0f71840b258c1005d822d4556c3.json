{"ast":null,"code":"export default {\n  name: 'HospitalListSpecialty',\n  data() {\n    return {\n      hospitalList: [],\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      ratingLoadingId: null // 正在评级的医院ID\n    };\n  },\n\n  methods: {\n    getHospitals() {\n      this.loading = true;\n      this.$request.get('/hospital/selectPage', {\n        params: {\n          pageNum: this.currentPage,\n          pageSize: this.pageSize\n        }\n      }).then(response => {\n        if (response.code == 200) {\n          this.hospitalList = response.data.list;\n          this.total = response.data.total;\n        }\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    // 医院评级\n    specialty(hospitalId) {\n      this.$confirm('确定要给该医院评定擅长疾病吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.ratingLoadingId = hospitalId;\n        this.$request.post(`/admin/hospital-specialty/${hospitalId}`).then(response => {\n          if (response.code == 200) {\n            this.$message.success('评定成功');\n            this.getHospitals(); // 刷新列表\n          }\n        }).catch(error => {\n          this.$message.error('评级失败');\n        }).finally(() => {\n          this.ratingLoadingId = null;\n        });\n      }).catch(() => {\n        this.$message.info('已取消评级');\n      });\n    },\n    handleCurrentChange(page) {\n      this.currentPage = page;\n      this.getHospitals();\n    }\n  },\n  mounted() {\n    this.getHospitals();\n  }\n};","map":{"version":3,"names":["name","data","hospitalList","currentPage","pageSize","total","ratingLoadingId","methods","getHospitals","loading","$request","get","params","pageNum","then","response","code","list","finally","specialty","hospitalId","$confirm","confirmButtonText","cancelButtonText","type","post","$message","success","catch","error","info","handleCurrentChange","page","mounted"],"sources":["src/views/topAdmin/HospitalSpecialty.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>医院列表-评级</span>\r\n      </div>\r\n\r\n      <el-row :gutter=\"20\">\r\n        <el-col\r\n            v-for=\"hospital in hospitalList\"\r\n            :key=\"hospital.id\"\r\n            :span=\"8\"\r\n            style=\"margin-bottom: 20px\"\r\n        >\r\n          <el-card shadow=\"hover\">\r\n            <div slot=\"header\" class=\"hospital-header\">\r\n              <span style=\"font-weight: bold\">{{ hospital.name }}</span>\r\n              <el-button\r\n                  size=\"mini\"\r\n                  type=\"primary\"\r\n                  @click.stop=\"specialty(hospital.id)\"\r\n                  :loading=\"hospital.id === ratingLoadingId\"\r\n              >更新擅长疾病</el-button>\r\n            </div>\r\n            <div class=\"hospital-info\">\r\n              <div><i class=\"el-icon-location\"></i> {{ hospital.address }}</div>\r\n              <div><i class=\"el-icon-phone\"></i> {{ hospital.phone }}</div>\r\n              <div><i class=\"el-icon-menu\"></i>\r\n                {{ hospital.specialty() || '无' }}\r\n              </div>\r\n            </div>\r\n          </el-card>\r\n        </el-col>\r\n      </el-row>\r\n\r\n      <el-pagination\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, prev, pager, next\"\r\n          :total=\"total\"\r\n          style=\"margin-top: 20px\"\r\n      ></el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HospitalListSpecialty',\r\n  data() {\r\n    return {\r\n      hospitalList: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      ratingLoadingId: null // 正在评级的医院ID\r\n    };\r\n  },\r\n  methods: {\r\n    getHospitals() {\r\n      this.loading = true;\r\n      this.$request.get('/hospital/selectPage', {\r\n        params: {\r\n          pageNum: this.currentPage,\r\n          pageSize: this.pageSize\r\n        }\r\n      })\r\n          .then(response => {\r\n            if (response.code == 200) {\r\n              this.hospitalList = response.data.list;\r\n              this.total = response.data.total;\r\n            }\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n\r\n    // 医院评级\r\n    specialty(hospitalId) {\r\n      this.$confirm('确定要给该医院评定擅长疾病吗?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.ratingLoadingId = hospitalId;\r\n        this.$request.post(`/admin/hospital-specialty/${hospitalId}`)\r\n            .then(response => {\r\n              if (response.code == 200) {\r\n                this.$message.success('评定成功');\r\n                this.getHospitals(); // 刷新列表\r\n              }\r\n            })\r\n            .catch(error => {\r\n              this.$message.error('评级失败');\r\n            })\r\n            .finally(() => {\r\n              this.ratingLoadingId = null;\r\n            });\r\n      }).catch(() => {\r\n        this.$message.info('已取消评级');\r\n      });\r\n    },\r\n\r\n\r\n    handleCurrentChange(page) {\r\n      this.currentPage = page;\r\n      this.getHospitals();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getHospitals();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.hospital-info {\r\n  line-height: 1.8;\r\n  color: #666;\r\n}\r\n.hospital-info i {\r\n  margin-right: 5px;\r\n  color: #409EFF;\r\n}\r\n.hospital-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n</style>"],"mappings":"AAgDA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,YAAA;MACAC,WAAA;MACAC,QAAA;MACAC,KAAA;MACAC,eAAA;IACA;EACA;;EACAC,OAAA;IACAC,aAAA;MACA,KAAAC,OAAA;MACA,KAAAC,QAAA,CAAAC,GAAA;QACAC,MAAA;UACAC,OAAA,OAAAV,WAAA;UACAC,QAAA,OAAAA;QACA;MACA,GACAU,IAAA,CAAAC,QAAA;QACA,IAAAA,QAAA,CAAAC,IAAA;UACA,KAAAd,YAAA,GAAAa,QAAA,CAAAd,IAAA,CAAAgB,IAAA;UACA,KAAAZ,KAAA,GAAAU,QAAA,CAAAd,IAAA,CAAAI,KAAA;QACA;MACA,GACAa,OAAA;QACA,KAAAT,OAAA;MACA;IACA;IAEA;IACAU,UAAAC,UAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAV,IAAA;QACA,KAAAR,eAAA,GAAAc,UAAA;QACA,KAAAV,QAAA,CAAAe,IAAA,8BAAAL,UAAA,IACAN,IAAA,CAAAC,QAAA;UACA,IAAAA,QAAA,CAAAC,IAAA;YACA,KAAAU,QAAA,CAAAC,OAAA;YACA,KAAAnB,YAAA;UACA;QACA,GACAoB,KAAA,CAAAC,KAAA;UACA,KAAAH,QAAA,CAAAG,KAAA;QACA,GACAX,OAAA;UACA,KAAAZ,eAAA;QACA;MACA,GAAAsB,KAAA;QACA,KAAAF,QAAA,CAAAI,IAAA;MACA;IACA;IAGAC,oBAAAC,IAAA;MACA,KAAA7B,WAAA,GAAA6B,IAAA;MACA,KAAAxB,YAAA;IACA;EACA;EACAyB,QAAA;IACA,KAAAzB,YAAA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}