{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"prescription-list\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"error\"\n};\nconst _hoisted_4 = {\n  \"slot-scope\": \"scope\"\n};\nconst _hoisted_5 = {\n  \"slot-scope\": \"scope\"\n};\nconst _hoisted_6 = {\n  \"slot-scope\": \"scope\"\n};\nconst _hoisted_7 = {\n  key: 3,\n  class: \"total-price\"\n};\nconst _hoisted_8 = {\n  class: \"actions\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"处方列表\", -1 /* HOISTED */)), _createCommentVNode(\" 加载状态 \"), $data.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"加载中...\")) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 错误提示 \"), $data.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($data.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 处方表格 \"), $data.prescriptions.length > 0 ? (_openBlock(), _createBlock(_component_el_table, {\n    key: 2,\n    data: $data.prescriptions,\n    stripe: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"order\",\n      label: \"订单号\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"hospitalName\",\n      label: \"医院名称\",\n      width: \"150\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"departmentName\",\n      label: \"科室名称\",\n      width: \"150\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"doctorName\",\n      label: \"医生姓名\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"date\",\n      label: \"日期\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"price\",\n      label: \"费用\",\n      width: \"80\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_4, [_createTextVNode(_toDisplayString(_ctx.scope.row.price) + \" 元 \", 1 /* TEXT */)])]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"userName\",\n      label: \"患者姓名\",\n      width: \"120\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"userGender\",\n      label: \"患者性别\",\n      width: \"80\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"userPhone\",\n      label: \"患者手机号\",\n      width: \"140\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_5, [_createTextVNode(_toDisplayString($options.formatPhone(_ctx.scope.row.userPhone)), 1 /* TEXT */)])]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"status\",\n      label: \"订单状态\",\n      width: \"120\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_6, [_createTextVNode(_toDisplayString($options.formatStatus(_ctx.scope.row.status)), 1 /* TEXT */)])]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      prop: \"medicines\",\n      label: \"药品名称\",\n      width: \"150\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"number\",\n      label: \"数量\",\n      width: \"80\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"content\",\n      label: \"备注\",\n      width: \"200\"\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 显示总计价格 \"), $data.prescriptions.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" 总计价格：\" + _toDisplayString($data.totalPrice) + \" 元 \", 1 /* TEXT */)) : (_openBlock(), _createElementBlock(_Fragment, {\n    key: 4\n  }, [_createCommentVNode(\" 无数据提示 \"), _cache[0] || (_cache[0] = _createElementVNode(\"div\", {\n    class: \"no-data\"\n  }, \"暂无处方信息\", -1 /* HOISTED */))], 2112 /* STABLE_FRAGMENT, DEV_ROOT_FRAGMENT */)), _createCommentVNode(\" 返回按钮 \"), _createElementVNode(\"div\", _hoisted_8, [_createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.handleBack\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"返回\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createCommentVNode","$data","loading","_hoisted_2","error","_hoisted_3","_toDisplayString","prescriptions","length","_createBlock","_component_el_table","data","stripe","_createVNode","_component_el_table_column","prop","label","width","_hoisted_4","_ctx","scope","row","price","_hoisted_5","$options","formatPhone","userPhone","_hoisted_6","formatStatus","status","_hoisted_7","totalPrice","_Fragment","key","_hoisted_8","_component_el_button","type","onClick","handleBack","_cache"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\doctor\\PrescribeDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"prescription-list\">\r\n    <h2>处方列表</h2>\r\n\r\n    <!-- 加载状态 -->\r\n    <div v-if=\"loading\" class=\"loading\">加载中...</div>\r\n\r\n    <!-- 错误提示 -->\r\n    <div v-if=\"error\" class=\"error\">{{ error }}</div>\r\n\r\n    <!-- 处方表格 -->\r\n    <el-table v-if=\"prescriptions.length > 0\" :data=\"prescriptions\" stripe>\r\n      <el-table-column prop=\"order\" label=\"订单号\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"hospitalName\" label=\"医院名称\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"departmentName\" label=\"科室名称\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"doctorName\" label=\"医生姓名\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"date\" label=\"日期\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"费用\" width=\"80\">\r\n        <template slot-scope=\"scope\">\r\n          {{ scope.row.price }} 元\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"userName\" label=\"患者姓名\" width=\"120\"></el-table-column>\r\n      <el-table-column prop=\"userGender\" label=\"患者性别\" width=\"80\"></el-table-column>\r\n      <el-table-column prop=\"userPhone\" label=\"患者手机号\" width=\"140\">\r\n        <template slot-scope=\"scope\">\r\n          {{ formatPhone(scope.row.userPhone) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"status\" label=\"订单状态\" width=\"120\">\r\n        <template slot-scope=\"scope\">\r\n          {{ formatStatus(scope.row.status) }}\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"medicines\" label=\"药品名称\" width=\"150\"></el-table-column>\r\n      <el-table-column prop=\"number\" label=\"数量\" width=\"80\"></el-table-column>\r\n      <el-table-column prop=\"content\" label=\"备注\" width=\"200\"></el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 显示总计价格 -->\r\n    <div v-if=\"prescriptions.length > 0\" class=\"total-price\">\r\n      总计价格：{{ totalPrice }} 元\r\n    </div>\r\n\r\n    <!-- 无数据提示 -->\r\n    <div v-else class=\"no-data\">暂无处方信息</div>\r\n\r\n    <!-- 返回按钮 -->\r\n    <div class=\"actions\">\r\n      <el-button type=\"primary\" @click=\"handleBack\">返回</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'PrescriptionList',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'), // 当前用户信息\r\n      prescriptions: [], // 处方列表信息\r\n      loading: false, // 加载状态\r\n      error: '', // 错误信息\r\n      totalPrice: 0 // 总计价格\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchPrescriptions(); // 初始化加载处方信息\r\n  },\r\n  methods: {\r\n    // 获取处方列表信息\r\n    fetchPrescriptions() {\r\n      this.loading = true;\r\n      this.error = '';\r\n      const userId = this.user.id;\r\n      console.log(this.$route.params.orderId);\r\n      this.$request.get('/prescribe/selectPrescribeDetail', {\r\n        params: { userId,orderId: this.$route.params.orderId }\r\n      })\r\n          .then(response => {\r\n            if (response.data) {\r\n              this.prescriptions = response.data;\r\n              // 计算总计价格\r\n              this.totalPrice = this.prescriptions.reduce((sum, prescription) => {\r\n                return sum + prescription.price;\r\n              }, 0);\r\n            } else {\r\n              this.error = response.data.message || '获取处方列表失败';\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('获取处方列表失败:', error);\r\n            this.error = '获取处方列表失败，请稍后重试';\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n\r\n    // 格式化手机号（脱敏显示）\r\n    formatPhone(phone) {\r\n      if (phone && phone.length === 11) {\r\n        return phone.substring(0, 3) + '****' + phone.substring(7);\r\n      }\r\n      return phone;\r\n    },\r\n\r\n    // 格式化订单状态\r\n    formatStatus(status) {\r\n      switch (status) {\r\n        case 0:\r\n          return '待处理';\r\n        case 1:\r\n          return '已处理';\r\n        case 2:\r\n          return '已完成';\r\n        case 3:\r\n          return '已完成';\r\n        case 5:\r\n          return '复诊中';\r\n        default:\r\n          return '未知状态';\r\n      }\r\n    },\r\n\r\n    // 返回上一页\r\n    handleBack() {\r\n      this.$router.go(-1);\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.prescription-list {\r\n  padding: 20px;\r\n}\r\n\r\n.loading,\r\n.error,\r\n.no-data {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n  font-size: 16px;\r\n  color: #666;\r\n}\r\n\r\n.error {\r\n  color: #f56c6c;\r\n}\r\n\r\n.total-price {\r\n  text-align: right;\r\n  margin-top: 10px;\r\n  font-weight: bold;\r\n}\r\n\r\n.total-price {\r\n  text-align: right;\r\n  margin-top: 10px;\r\n  font-weight: bold;\r\n  font-size: 18px; /* 增大字体大小 */\r\n  color: #333; /* 修改字体颜色 */\r\n  background-color: #f9f9f9; /* 添加背景色 */\r\n  border: 1px solid #e0e0e0; /* 添加边框 */\r\n  padding: 10px; /* 添加内边距 */\r\n  border-radius: 4px; /* 圆角边框 */\r\n}\r\n\r\n.actions {\r\n  margin-top: 20px;\r\n  text-align: center;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;;EAIRA,KAAK,EAAC;;;;EAGRA,KAAK,EAAC;;;EAUV,YAAU,EAAC;AAAO;;EAOlB,YAAU,EAAC;AAAO;;EAKlB,YAAU,EAAC;AAAO;;;EAUKA,KAAK,EAAC;;;EAQtCA,KAAK,EAAC;AAAS;;;;;uBA/CtBC,mBAAA,CAkDM,OAlDNC,UAkDM,G,0BAjDJC,mBAAA,CAAa,YAAT,MAAI,sBAERC,mBAAA,UAAa,EACFC,KAAA,CAAAC,OAAO,I,cAAlBL,mBAAA,CAAgD,OAAhDM,UAAgD,EAAZ,QAAM,K,mCAE1CH,mBAAA,UAAa,EACFC,KAAA,CAAAG,KAAK,I,cAAhBP,mBAAA,CAAiD,OAAjDQ,UAAiD,EAAAC,gBAAA,CAAdL,KAAA,CAAAG,KAAK,oB,mCAExCJ,mBAAA,UAAa,EACGC,KAAA,CAAAM,aAAa,CAACC,MAAM,Q,cAApCC,YAAA,CA0BWC,mBAAA;;IA1BgCC,IAAI,EAAEV,KAAA,CAAAM,aAAa;IAAEK,MAAM,EAAN;;sBAC9D,MAAwE,CAAxEC,YAAA,CAAwEC,0BAAA;MAAvDC,IAAI,EAAC,OAAO;MAACC,KAAK,EAAC,KAAK;MAACC,KAAK,EAAC;QAChDJ,YAAA,CAAgFC,0BAAA;MAA/DC,IAAI,EAAC,cAAc;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC;QACxDJ,YAAA,CAAkFC,0BAAA;MAAjEC,IAAI,EAAC,gBAAgB;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC;QAC1DJ,YAAA,CAA8EC,0BAAA;MAA7DC,IAAI,EAAC,YAAY;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC;QACtDJ,YAAA,CAAsEC,0BAAA;MAArDC,IAAI,EAAC,MAAM;MAACC,KAAK,EAAC,IAAI;MAACC,KAAK,EAAC;QAC9CJ,YAAA,CAIkBC,0BAAA;MAJDC,IAAI,EAAC,OAAO;MAACC,KAAK,EAAC,IAAI;MAACC,KAAK,EAAC;;wBAC7C,MAEW,CAFXlB,mBAAA,CAEW,YAFXmB,UAEW,G,kCADNC,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACC,KAAK,IAAG,KACvB,gB;;;QAEFT,YAAA,CAA4EC,0BAAA;MAA3DC,IAAI,EAAC,UAAU;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC;QACpDJ,YAAA,CAA6EC,0BAAA;MAA5DC,IAAI,EAAC,YAAY;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC;QACtDJ,YAAA,CAIkBC,0BAAA;MAJDC,IAAI,EAAC,WAAW;MAACC,KAAK,EAAC,OAAO;MAACC,KAAK,EAAC;;wBACpD,MAEW,CAFXlB,mBAAA,CAEW,YAFXwB,UAEW,G,kCADNC,QAAA,CAAAC,WAAW,CAACN,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACK,SAAS,kB;;;QAGtCb,YAAA,CAIkBC,0BAAA;MAJDC,IAAI,EAAC,QAAQ;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC;;wBAChD,MAEW,CAFXlB,mBAAA,CAEW,YAFX4B,UAEW,G,kCADNH,QAAA,CAAAI,YAAY,CAACT,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACQ,MAAM,kB;;;QAGpChB,YAAA,CAA6EC,0BAAA;MAA5DC,IAAI,EAAC,WAAW;MAACC,KAAK,EAAC,MAAM;MAACC,KAAK,EAAC;QACrDJ,YAAA,CAAuEC,0BAAA;MAAtDC,IAAI,EAAC,QAAQ;MAACC,KAAK,EAAC,IAAI;MAACC,KAAK,EAAC;QAChDJ,YAAA,CAAyEC,0BAAA;MAAxDC,IAAI,EAAC,SAAS;MAACC,KAAK,EAAC,IAAI;MAACC,KAAK,EAAC;;;oEAGnDjB,mBAAA,YAAe,EACJC,KAAA,CAAAM,aAAa,CAACC,MAAM,Q,cAA/BX,mBAAA,CAEM,OAFNiC,UAEM,EAFmD,QAClD,GAAAxB,gBAAA,CAAGL,KAAA,CAAA8B,UAAU,IAAG,KACvB,oB,cAGAlC,mBAAA,CAAwCmC,SAAA;IAAAC,GAAA;EAAA,IADxCjC,mBAAA,WAAc,E,0BACdD,mBAAA,CAAwC;IAA5BH,KAAK,EAAC;EAAS,GAAC,QAAM,qB,mDAElCI,mBAAA,UAAa,EACbD,mBAAA,CAEM,OAFNmC,UAEM,GADJrB,YAAA,CAA4DsB,oBAAA;IAAjDC,IAAI,EAAC,SAAS;IAAEC,OAAK,EAAEb,QAAA,CAAAc;;sBAAY,MAAEC,MAAA,QAAAA,MAAA,O,iBAAF,IAAE,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}