{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"admission-container\"\n};\nconst _hoisted_2 = {\n  class: \"action-buttons\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_descriptions_item = _resolveComponent(\"el-descriptions-item\");\n  const _component_el_descriptions = _resolveComponent(\"el-descriptions\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_date_picker = _resolveComponent(\"el-date-picker\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_input_number = _resolveComponent(\"el-input-number\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_crd = _resolveComponent(\"el-crd\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[8] || (_cache[8] = _createElementVNode(\"h2\", null, \"入院办理\", -1 /* HOISTED */)), _createVNode(_component_el_card, {\n    class: \"patient-info\"\n  }, {\n    default: _withCtx(() => [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n      slot: \"header\"\n    }, [_createElementVNode(\"span\", null, \"患者信息\")], -1 /* HOISTED */)), _createVNode(_component_el_descriptions, {\n      column: 2,\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_descriptions_item, {\n        label: \"姓名\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.patientInfo.userName), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"医院\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.patientInfo.hospitalName), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"科室\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.patientInfo.departmentName), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_descriptions_item, {\n        label: \"主治医生\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString($data.patientInfo.doctorName), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_crd, {\n    class: \"admission-form\"\n  }, {\n    default: _withCtx(() => [_cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n      slot: \"header\"\n    }, [_createElementVNode(\"span\", null, \"入院信息\")], -1 /* HOISTED */)), _createVNode(_component_el_form, {\n      ref: \"form\",\n      model: $data.formData,\n      \"label-width\": \"120px\"\n    }, {\n      default: _withCtx(() => [_createCommentVNode(\" 入院时间 \"), _createVNode(_component_el_form_item, {\n        label: \"入院日期\",\n        prop: \"admissionDate\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_date_picker, {\n          modelValue: $data.formData.admissionDate,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.formData.admissionDate = $event),\n          type: \"date\",\n          placeholder: \"选择入院日期\",\n          style: {\n            \"width\": \"100%\"\n          },\n          \"value-format\": \"yyyy-MM-dd\",\n          \"default-value\": new Date()\n        }, null, 8 /* PROPS */, [\"modelValue\", \"default-value\"])]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 入院类型 \"), _createVNode(_component_el_form_item, {\n        label: \"入院类型\",\n        prop: \"admissionType\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.formData.admissionType,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.formData.admissionType = $event),\n          placeholder: \"请选择入院类型\",\n          style: {\n            \"width\": \"100%\"\n          }\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"普通入院\",\n            value: \"普通\"\n          }), _createVNode(_component_el_option, {\n            label: \"急诊入院\",\n            value: \"急诊\"\n          }), _createVNode(_component_el_option, {\n            label: \"VIP入院\",\n            value: \"VIP\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 预交金额 \"), _createVNode(_component_el_form_item, {\n        label: \"预交金额\",\n        prop: \"prepayment\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input_number, {\n          modelValue: $data.formData.prepayment,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.formData.prepayment = $event),\n          min: 1000,\n          step: 500,\n          style: {\n            \"width\": \"100%\"\n          },\n          placeholder: \"请输入预交金额\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 病情描述 \"), _createVNode(_component_el_form_item, {\n        label: \"手术\",\n        prop: \"condition\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.formData.surgery,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.formData.surgery = $event),\n          type: \"textarea\",\n          rows: 3,\n          placeholder: \"简要描述手术\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }), _createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_button, {\n    onClick: $options.handleCancel\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"取消\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.handleSubmit\n  }, {\n    default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"确认办理\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_createVNode","_component_el_card","slot","_component_el_descriptions","column","border","_component_el_descriptions_item","label","$data","patientInfo","userName","hospitalName","departmentName","doctorName","_component_el_crd","_component_el_form","ref","model","formData","_createCommentVNode","_component_el_form_item","prop","_component_el_date_picker","admissionDate","$event","type","placeholder","style","Date","_component_el_select","admissionType","_component_el_option","value","_component_el_input_number","prepayment","min","step","_component_el_input","surgery","rows","_hoisted_2","_component_el_button","onClick","$options","handleCancel","_cache","handleSubmit"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\doctor\\Admission.vue"],"sourcesContent":["<template>\r\n  <div class=\"admission-container\">\r\n    <h2>入院办理</h2>\r\n\r\n    <el-card class=\"patient-info\">\r\n      <div slot=\"header\">\r\n        <span>患者信息</span>\r\n      </div>\r\n      <el-descriptions :column=\"2\" border>\r\n        <el-descriptions-item label=\"姓名\">{{ patientInfo.userName }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"医院\">{{ patientInfo.hospitalName }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"科室\">{{ patientInfo.departmentName }}</el-descriptions-item>\r\n        <el-descriptions-item label=\"主治医生\">{{ patientInfo.doctorName }}</el-descriptions-item>\r\n      </el-descriptions>\r\n    </el-card>\r\n\r\n    <el-crd class=\"admission-form\">\r\n      <div slot=\"header\">\r\n        <span>入院信息</span>\r\n      </div>\r\n      <el-form ref=\"form\" :model=\"formData\" label-width=\"120px\">\r\n        <!-- 入院时间 -->\r\n        <el-form-item label=\"入院日期\" prop=\"admissionDate\">\r\n          <el-date-picker\r\n              v-model=\"formData.admissionDate\"\r\n              type=\"date\"\r\n              placeholder=\"选择入院日期\"\r\n              style=\"width: 100%\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              :default-value=\"new Date()\"\r\n          ></el-date-picker>\r\n        </el-form-item>\r\n\r\n        <!-- 入院类型 -->\r\n        <el-form-item label=\"入院类型\" prop=\"admissionType\">\r\n          <el-select\r\n              v-model=\"formData.admissionType\"\r\n              placeholder=\"请选择入院类型\"\r\n              style=\"width: 100%\"\r\n          >\r\n            <el-option label=\"普通入院\" value=\"普通\"></el-option>\r\n            <el-option label=\"急诊入院\" value=\"急诊\"></el-option>\r\n            <el-option label=\"VIP入院\" value=\"VIP\"></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <!-- 预交金额 -->\r\n        <el-form-item label=\"预交金额\" prop=\"prepayment\">\r\n          <el-input-number\r\n              v-model=\"formData.prepayment\"\r\n              :min=\"1000\"\r\n              :step=\"500\"\r\n              style=\"width: 100%\"\r\n              placeholder=\"请输入预交金额\"\r\n          ></el-input-number>\r\n        </el-form-item>\r\n\r\n        <!-- 病情描述 -->\r\n        <el-form-item label=\"手术\" prop=\"condition\">\r\n          <el-input\r\n              v-model=\"formData.surgery\"\r\n              type=\"textarea\"\r\n              :rows=\"3\"\r\n              placeholder=\"简要描述手术\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-crd>\r\n\r\n    <div class=\"action-buttons\">\r\n      <el-button @click=\"handleCancel\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"handleSubmit\">确认办理</el-button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Admission',\r\n  data() {\r\n    return {\r\n      patientInfo: {\r\n        id: this.$route.params.id,\r\n        userName: this.$route.params.userName || '',\r\n        hospitalName: this.$route.params.hospitalName || '',\r\n        departmentName: this.$route.params.departmentName || '',\r\n        doctorName: this.$route.params.doctorName || ''\r\n      },\r\n      formData: {\r\n        admissionDate: this.formatDate(new Date()), // 默认当天，格式化为YYYY-MM-DD\r\n        admissionType: '普通',\r\n        prepayment: 3000,\r\n        surgery: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    // 提交表单\r\n    handleSubmit() {\r\n      this.$refs.form.validate(valid => {\r\n        if (valid) {\r\n          const admissionData = {\r\n            ...this.formData,\r\n            ...this.patientInfo\r\n          }\r\n          console.log(admissionData)\r\n          this.$request.post('/report/admission', admissionData)\r\n              .then(response => {\r\n                this.$message.success('入院办理成功')\r\n                this.$router.go(-1) // 返回上一页\r\n              })\r\n              .catch(error => {\r\n                console.error('入院办理失败:', error)\r\n                this.$message.error(error.response?.data?.message || '入院办理失败')\r\n              })\r\n        }\r\n      })\r\n    },\r\n\r\n    formatDate(date) {\r\n      const d = new Date(date)\r\n      const year = d.getFullYear()\r\n      const month = String(d.getMonth() + 1).padStart(2, '0')\r\n      const day = String(d.getDate()).padStart(2, '0')\r\n      return `${year}-${month}-${day}`\r\n    },\r\n\r\n    // 取消\r\n    handleCancel() {\r\n      this.$confirm('确定要取消入院办理吗？', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        this.$router.go(-1) // 返回上一页\r\n      }).catch(() => {})\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.admission-container {\r\n  padding: 20px;\r\n  max-width: 800px;\r\n  margin: 0 auto;\r\n}\r\n\r\n.patient-info,\r\n.admission-form {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.action-buttons {\r\n  text-align: center;\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-descriptions {\r\n  margin-top: 10px;\r\n}\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}