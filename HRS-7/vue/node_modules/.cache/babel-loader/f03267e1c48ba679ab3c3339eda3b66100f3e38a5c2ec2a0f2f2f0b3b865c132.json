{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"app-container\"\n};\nconst _hoisted_2 = {\n  slot: \"header\",\n  class: \"clearfix\"\n};\nconst _hoisted_3 = {\n  style: {\n    \"float\": \"right\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[5] || (_cache[5] = _createElementVNode(\"span\", null, \"发布健康科普文章\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n      type: \"success\",\n      onClick: _cache[0] || (_cache[0] = $event => $options.submitForm('publish')),\n      loading: $data.loading\n    }, {\n      default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\" 立即发布 \")])),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"loading\"])])]), _createVNode(_component_el_form, {\n      model: $data.articleForm,\n      rules: $data.rules,\n      ref: \"articleForm\",\n      \"label-width\": \"100px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"文章标题\",\n        prop: \"title\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.articleForm.title,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.articleForm.title = $event),\n          placeholder: \"请输入文章标题\",\n          maxlength: \"50\",\n          \"show-word-limit\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"文章分类\",\n        prop: \"category\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.articleForm.category,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.articleForm.category = $event),\n          placeholder: \"请选择分类\",\n          style: {\n            \"width\": \"100%\"\n          }\n        }, {\n          default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.categories, item => {\n            return _openBlock(), _createBlock(_component_el_option, {\n              key: item.value,\n              label: item.label,\n              value: item.value\n            }, null, 8 /* PROPS */, [\"label\", \"value\"]);\n          }), 128 /* KEYED_FRAGMENT */))]),\n\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"文章内容\",\n        prop: \"content\"\n      }, {\n        default: _withCtx(() => [_createCommentVNode(\" 富文本编辑器 \"), _createVNode(_component_el_input, {\n          type: \"textarea\",\n          modelValue: $data.articleForm.content,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.articleForm.content = $event),\n          rows: 10,\n          placeholder: \"请输入文章内容\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\", \"rules\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","slot","style","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","_createElementVNode","_hoisted_2","_hoisted_3","_component_el_button","type","onClick","_cache","$event","$options","submitForm","loading","$data","_component_el_form","model","articleForm","rules","ref","_component_el_form_item","label","prop","_component_el_input","title","placeholder","maxlength","_component_el_select","category","_Fragment","_renderList","categories","item","_createBlock","_component_el_option","key","value","_createCommentVNode","content","rows"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\hospitalAdmin\\HealthArticle.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>发布健康科普文章</span>\r\n        <div style=\"float: right\">\r\n          <el-button\r\n              type=\"success\"\r\n              @click=\"submitForm('publish')\"\r\n              :loading=\"loading\"\r\n          >\r\n            立即发布\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <el-form\r\n          :model=\"articleForm\"\r\n          :rules=\"rules\"\r\n          ref=\"articleForm\"\r\n          label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"文章标题\" prop=\"title\">\r\n          <el-input\r\n              v-model=\"articleForm.title\"\r\n              placeholder=\"请输入文章标题\"\r\n              maxlength=\"50\"\r\n              show-word-limit\r\n          ></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"文章分类\" prop=\"category\">\r\n          <el-select\r\n              v-model=\"articleForm.category\"\r\n              placeholder=\"请选择分类\"\r\n              style=\"width: 100%\"\r\n          >\r\n            <el-option\r\n                v-for=\"item in categories\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"文章内容\" prop=\"content\">\r\n          <!-- 富文本编辑器 -->\r\n          <el-input\r\n              type=\"textarea\"\r\n              v-model=\"articleForm.content\"\r\n              :rows=\"10\"\r\n              placeholder=\"请输入文章内容\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HealthArticlePublish',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\r\n      loading: false,\r\n      articleForm: {\r\n        title: '',\r\n        content: '',\r\n        category: '',\r\n        hospitalId: '',\r\n      },\r\n      categories: [\r\n        { value: '饮食健康', label: '饮食健康' },\r\n        { value: '运动保健', label: '运动保健' },\r\n        { value: '疾病预防', label: '疾病预防' },\r\n        { value: '心理健康', label: '心理健康' },\r\n        { value: '育儿知识', label: '育儿知识' }\r\n      ],\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入文章标题', trigger: 'blur' },\r\n          { min: 5, max: 50, message: '长度在 5 到 50 个字符', trigger: 'blur' }\r\n        ],\r\n        category: [\r\n          { required: true, message: '请选择文章分类', trigger: 'change' }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入文章内容', trigger: 'blur' },\r\n          { min: 100, message: '内容至少需要100个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.$refs.articleForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          this.articleForm.hospitalId = this.user.id;\r\n          this.$request.post('admin/addHealthArticle', this.articleForm)\r\n              .then(response => {\r\n                if (response.code == 200) {\r\n                  this.$message.success( '发布成功');\r\n                  this.resetForm();\r\n                } else {\r\n                  this.$message.error(response.message || '操作失败');\r\n                }\r\n              })\r\n              .catch(error => {\r\n                console.error('操作失败:', error);\r\n                this.$message.error('操作失败，请稍后重试');\r\n              })\r\n              .finally(() => {\r\n                this.loading = false;\r\n              });\r\n        }\r\n      });\r\n    },\r\n\r\n    resetForm() {\r\n      this.$refs.articleForm.resetFields();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n\r\n.app-container {\r\n  padding: 20px;\r\n}\r\n\r\n.el-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-textarea {\r\n  font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", Arial, sans-serif;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAe;;EAEjBC,IAAI,EAAC,QAAQ;EAACD,KAAK,EAAC;;;EAElBE,KAAoB,EAApB;IAAA;EAAA;AAAoB;;;;;;;;;uBAJ/BC,mBAAA,CAwDM,OAxDNC,UAwDM,GAvDJC,YAAA,CAsDUC,kBAAA;sBArDR,MAWM,CAXNC,mBAAA,CAWM,OAXNC,UAWM,G,0BAVJD,mBAAA,CAAqB,cAAf,UAAQ,sBACdA,mBAAA,CAQM,OARNE,UAQM,GAPJJ,YAAA,CAMYK,oBAAA;MALRC,IAAI,EAAC,SAAS;MACbC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,UAAU;MACjBC,OAAO,EAAEC,KAAA,CAAAD;;wBACb,MAEDJ,MAAA,QAAAA,MAAA,O,iBAFC,QAED,E;;wCAIJR,YAAA,CAuCUc,kBAAA;MAtCLC,KAAK,EAAEF,KAAA,CAAAG,WAAW;MAClBC,KAAK,EAAEJ,KAAA,CAAAI,KAAK;MACbC,GAAG,EAAC,aAAa;MACjB,aAAW,EAAC;;wBAEd,MAOe,CAPflB,YAAA,CAOemB,uBAAA;QAPDC,KAAK,EAAC,MAAM;QAACC,IAAI,EAAC;;0BAC9B,MAKY,CALZrB,YAAA,CAKYsB,mBAAA;sBAJCT,KAAA,CAAAG,WAAW,CAACO,KAAK;qEAAjBV,KAAA,CAAAG,WAAW,CAACO,KAAK,GAAAd,MAAA;UAC1Be,WAAW,EAAC,SAAS;UACrBC,SAAS,EAAC,IAAI;UACd,iBAAe,EAAf;;;UAINzB,YAAA,CAaemB,uBAAA;QAbDC,KAAK,EAAC,MAAM;QAACC,IAAI,EAAC;;0BAC9B,MAWY,CAXZrB,YAAA,CAWY0B,oBAAA;sBAVCb,KAAA,CAAAG,WAAW,CAACW,QAAQ;qEAApBd,KAAA,CAAAG,WAAW,CAACW,QAAQ,GAAAlB,MAAA;UAC7Be,WAAW,EAAC,OAAO;UACnB3B,KAAmB,EAAnB;YAAA;UAAA;;4BAGE,MAA0B,E,kBAD9BC,mBAAA,CAKa8B,SAAA,QAAAC,WAAA,CAJMhB,KAAA,CAAAiB,UAAU,EAAlBC,IAAI;iCADfC,YAAA,CAKaC,oBAAA;cAHRC,GAAG,EAAEH,IAAI,CAACI,KAAK;cACff,KAAK,EAAEW,IAAI,CAACX,KAAK;cACjBe,KAAK,EAAEJ,IAAI,CAACI;;;;;;;UAKrBnC,YAAA,CAQemB,uBAAA;QARDC,KAAK,EAAC,MAAM;QAACC,IAAI,EAAC;;0BAC9B,MAAe,CAAfe,mBAAA,YAAe,EACfpC,YAAA,CAKYsB,mBAAA;UAJRhB,IAAI,EAAC,UAAU;sBACNO,KAAA,CAAAG,WAAW,CAACqB,OAAO;qEAAnBxB,KAAA,CAAAG,WAAW,CAACqB,OAAO,GAAA5B,MAAA;UAC3B6B,IAAI,EAAE,EAAE;UACTd,WAAW,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}