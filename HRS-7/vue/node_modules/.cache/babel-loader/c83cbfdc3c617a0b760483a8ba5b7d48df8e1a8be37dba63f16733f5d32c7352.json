{"ast":null,"code":"export default {\n  name: 'HealthArticlePublish',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\n      loading: false,\n      articleForm: {\n        title: '',\n        content: '',\n        category: '',\n        hospitalId: ''\n      },\n      categories: [{\n        value: '饮食健康',\n        label: '饮食健康'\n      }, {\n        value: '运动保健',\n        label: '运动保健'\n      }, {\n        value: '疾病预防',\n        label: '疾病预防'\n      }, {\n        value: '心理健康',\n        label: '心理健康'\n      }, {\n        value: '育儿知识',\n        label: '育儿知识'\n      }],\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入文章标题',\n          trigger: 'blur'\n        }, {\n          min: 5,\n          max: 50,\n          message: '长度在 5 到 50 个字符',\n          trigger: 'blur'\n        }],\n        category: [{\n          required: true,\n          message: '请选择文章分类',\n          trigger: 'change'\n        }],\n        content: [{\n          required: true,\n          message: '请输入文章内容',\n          trigger: 'blur'\n        }, {\n          min: 100,\n          message: '内容至少需要100个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm() {\n      this.$refs.articleForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          this.articleForm.hospitalId = this.user.id;\n          this.$request.post('admin/addHealthArticle', this.articleForm).then(response => {\n            if (response.code == 200) {\n              this.$message.success('发布成功');\n              this.resetForm();\n            } else {\n              this.$message.error(response.message || '操作失败');\n            }\n          }).catch(error => {\n            console.error('操作失败:', error);\n            this.$message.error('操作失败，请稍后重试');\n          }).finally(() => {\n            this.loading = false;\n          });\n        }\n      });\n    },\n    resetForm() {\n      this.$refs.articleForm.resetFields();\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","JSON","parse","localStorage","getItem","loading","articleForm","title","content","category","hospitalId","categories","value","label","rules","required","message","trigger","min","max","methods","submitForm","$refs","validate","valid","id","$request","post","then","response","code","$message","success","resetForm","error","catch","console","finally","resetFields"],"sources":["src/views/hospitalAdmin/HealthArticle.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>发布健康科普文章</span>\r\n        <div style=\"float: right\">\r\n          <el-button\r\n              type=\"success\"\r\n              @click=\"submitForm('publish')\"\r\n              :loading=\"loading\"\r\n          >\r\n            立即发布\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <el-form\r\n          :model=\"articleForm\"\r\n          :rules=\"rules\"\r\n          ref=\"articleForm\"\r\n          label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"文章标题\" prop=\"title\">\r\n          <el-input\r\n              v-model=\"articleForm.title\"\r\n              placeholder=\"请输入文章标题\"\r\n              maxlength=\"50\"\r\n              show-word-limit\r\n          ></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"文章分类\" prop=\"category\">\r\n          <el-select\r\n              v-model=\"articleForm.category\"\r\n              placeholder=\"请选择分类\"\r\n              style=\"width: 100%\"\r\n          >\r\n            <el-option\r\n                v-for=\"item in categories\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"文章内容\" prop=\"content\">\r\n          <!-- 富文本编辑器 -->\r\n          <el-input\r\n              type=\"textarea\"\r\n              v-model=\"articleForm.content\"\r\n              :rows=\"10\"\r\n              placeholder=\"请输入文章内容\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HealthArticlePublish',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\r\n      loading: false,\r\n      articleForm: {\r\n        title: '',\r\n        content: '',\r\n        category: '',\r\n        hospitalId: '',\r\n      },\r\n      categories: [\r\n        { value: '饮食健康', label: '饮食健康' },\r\n        { value: '运动保健', label: '运动保健' },\r\n        { value: '疾病预防', label: '疾病预防' },\r\n        { value: '心理健康', label: '心理健康' },\r\n        { value: '育儿知识', label: '育儿知识' }\r\n      ],\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入文章标题', trigger: 'blur' },\r\n          { min: 5, max: 50, message: '长度在 5 到 50 个字符', trigger: 'blur' }\r\n        ],\r\n        category: [\r\n          { required: true, message: '请选择文章分类', trigger: 'change' }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入文章内容', trigger: 'blur' },\r\n          { min: 100, message: '内容至少需要100个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.$refs.articleForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          this.articleForm.hospitalId = this.user.id;\r\n          this.$request.post('admin/addHealthArticle', this.articleForm)\r\n              .then(response => {\r\n                if (response.code == 200) {\r\n                  this.$message.success( '发布成功');\r\n                  this.resetForm();\r\n                } else {\r\n                  this.$message.error(response.message || '操作失败');\r\n                }\r\n              })\r\n              .catch(error => {\r\n                console.error('操作失败:', error);\r\n                this.$message.error('操作失败，请稍后重试');\r\n              })\r\n              .finally(() => {\r\n                this.loading = false;\r\n              });\r\n        }\r\n      });\r\n    },\r\n\r\n    resetForm() {\r\n      this.$refs.articleForm.resetFields();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n\r\n.app-container {\r\n  padding: 20px;\r\n}\r\n\r\n.el-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-textarea {\r\n  font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", Arial, sans-serif;\r\n}\r\n</style>"],"mappings":"AA6DA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,IAAA,EAAAC,IAAA,CAAAC,KAAA,CAAAC,YAAA,CAAAC,OAAA;MACAC,OAAA;MACAC,WAAA;QACAC,KAAA;QACAC,OAAA;QACAC,QAAA;QACAC,UAAA;MACA;MACAC,UAAA,GACA;QAAAC,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,GACA;QAAAD,KAAA;QAAAC,KAAA;MAAA,EACA;MACAC,KAAA;QACAP,KAAA,GACA;UAAAQ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA,EACA;QACAR,QAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAT,OAAA,GACA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAF,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAG,OAAA;IACAC,WAAA;MACA,KAAAC,KAAA,CAAAhB,WAAA,CAAAiB,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA,KAAAnB,OAAA;UACA,KAAAC,WAAA,CAAAI,UAAA,QAAAV,IAAA,CAAAyB,EAAA;UACA,KAAAC,QAAA,CAAAC,IAAA,gCAAArB,WAAA,EACAsB,IAAA,CAAAC,QAAA;YACA,IAAAA,QAAA,CAAAC,IAAA;cACA,KAAAC,QAAA,CAAAC,OAAA;cACA,KAAAC,SAAA;YACA;cACA,KAAAF,QAAA,CAAAG,KAAA,CAAAL,QAAA,CAAAb,OAAA;YACA;UACA,GACAmB,KAAA,CAAAD,KAAA;YACAE,OAAA,CAAAF,KAAA,UAAAA,KAAA;YACA,KAAAH,QAAA,CAAAG,KAAA;UACA,GACAG,OAAA;YACA,KAAAhC,OAAA;UACA;QACA;MACA;IACA;IAEA4B,UAAA;MACA,KAAAX,KAAA,CAAAhB,WAAA,CAAAgC,WAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}