{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"app-container\"\n};\nconst _hoisted_2 = {\n  slot: \"header\",\n  class: \"clearfix\"\n};\nconst _hoisted_3 = {\n  style: {\n    \"float\": \"right\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[1] || (_cache[1] = _createElementVNode(\"span\", null, \"挂号单管理\", -1 /* HOISTED */)), _createElementVNode(\"div\", _hoisted_3, [_createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.refreshRegister,\n      loading: $data.loading\n    }, {\n      default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\" 刷新列表 \")])),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\", \"loading\"])])]), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n      data: $data.registerList,\n      border: \"\",\n      style: {\n        \"width\": \"100%\"\n      }\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"order\",\n        label: \"订单号\",\n        width: \"180\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"hospitalName\",\n        label: \"医院\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"departmentName\",\n        label: \"科室\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"doctorName\",\n        label: \"医生\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"患者信息\",\n        width: \"180\"\n      }, {\n        default: _withCtx(scope => [_createElementVNode(\"div\", null, _toDisplayString(scope.row.userName), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString($options.formatPhone(scope.row.userPhone)), 1 /* TEXT */), _createElementVNode(\"div\", null, _toDisplayString(scope.row.userGender), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        prop: \"orderTime\",\n        label: \"下单时间\",\n        width: \"160\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"registerTime\",\n        label: \"预约时间\",\n        width: \"160\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"price\",\n        label: \"价格\",\n        width: \"100\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"状态\",\n        width: \"100\"\n      }, {\n        default: _withCtx(scope => [_createTextVNode(_toDisplayString($options.formatStatus(scope.row.status)), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $data.loading]]), _createCommentVNode(\" 分页 \"), _createVNode(_component_el_pagination, {\n      onSizeChange: $options.handleSizeChange,\n      onCurrentChange: $options.handleCurrentChange,\n      \"current-page\": $data.currentPage,\n      \"page-sizes\": [10, 20, 30, 50],\n      \"page-size\": $data.pageSize,\n      layout: \"total, sizes, prev, pager, next, jumper\",\n      total: $data.total,\n      style: {\n        \"margin-top\": \"20px\"\n      }\n    }, null, 8 /* PROPS */, [\"onSizeChange\", \"onCurrentChange\", \"current-page\", \"page-size\", \"total\"])]),\n    _: 1 /* STABLE */\n  })]);\n}","map":{"version":3,"names":["class","slot","style","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","_createElementVNode","_hoisted_2","_hoisted_3","_component_el_button","type","onClick","$options","refreshRegister","loading","$data","_cache","_createBlock","_component_el_table","data","registerList","border","_component_el_table_column","prop","label","width","default","_withCtx","scope","_toDisplayString","row","userName","formatPhone","userPhone","userGender","formatStatus","status","_createCommentVNode","_component_el_pagination","onSizeChange","handleSizeChange","onCurrentChange","handleCurrentChange","currentPage","pageSize","layout","total"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\hospitalAdmin\\Registration.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>挂号单管理</span>\r\n        <div style=\"float: right\">\r\n          <el-button type=\"primary\" @click=\"refreshRegister\" :loading=\"loading\">\r\n            刷新列表\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <el-table\r\n          v-loading=\"loading\"\r\n          :data=\"registerList\"\r\n          border\r\n          style=\"width: 100%\"\r\n      >\r\n        <el-table-column prop=\"order\" label=\"订单号\" width=\"180\" />\r\n        <el-table-column prop=\"hospitalName\" label=\"医院\" width=\"120\" />\r\n        <el-table-column prop=\"departmentName\" label=\"科室\" width=\"120\" />\r\n        <el-table-column prop=\"doctorName\" label=\"医生\" width=\"120\" />\r\n        <el-table-column label=\"患者信息\" width=\"180\">\r\n          <template #default=\"scope\">\r\n            <div>{{ scope.row.userName }}</div>\r\n            <div>{{ formatPhone(scope.row.userPhone) }}</div>\r\n            <div>{{ scope.row.userGender }}</div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"orderTime\" label=\"下单时间\" width=\"160\" />\r\n        <el-table-column prop=\"registerTime\" label=\"预约时间\" width=\"160\" />\r\n        <el-table-column prop=\"price\" label=\"价格\" width=\"100\" />\r\n        <el-table-column label=\"状态\" width=\"100\">\r\n          <template #default=\"scope\">\r\n            {{ formatStatus(scope.row.status) }}\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页 -->\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[10, 20, 30, 50]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\"\r\n          style=\"margin-top: 20px\"\r\n      ></el-pagination>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'RegisterManagement',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\r\n      loading: false,\r\n      registerList: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0\r\n    };\r\n  },\r\n  methods: {\r\n    refreshRegister() {\r\n      this.getRegisterList();\r\n    },\r\n\r\n    getRegisterList() {\r\n      this.loading = true;\r\n      this.$request.get('/admin/selectRegisterPage', {\r\n        params: {\r\n          adminId: this.user.id,\r\n          pageNum: this.currentPage,\r\n          pageSize: this.pageSize\r\n        }\r\n      })\r\n          .then(response => {\r\n            if (response.code == 200) {\r\n              this.registerList = response.data.list;\r\n              this.total = response.data.total;\r\n            } else {\r\n              this.$message.error(response.data.message || '获取挂号单失败');\r\n            }\r\n          })\r\n          .catch(error => {\r\n            console.error('获取挂号单失败:', error);\r\n            this.$message.error('请求失败，请稍后重试');\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n\r\n    formatPhone(phone) {\r\n      if (phone && phone.length === 11) {\r\n        return phone.substring(0, 3) + '****' + phone.substring(7);\r\n      }\r\n      return phone;\r\n    },\r\n\r\n    formatStatus(status) {\r\n      switch (status) {\r\n        case 0: return '待问诊'\r\n        case 1: return '已问诊'\r\n        case 2: return '已开药'\r\n        case 3: return '已完成'\r\n        case 4: return '已取消'\r\n        case 5: return '复诊'\r\n        default: return '未知状态'\r\n      }\r\n    },\r\n\r\n\r\n    handleSizeChange(val) {\r\n      this.pageSize = val;\r\n      this.getRegisterList();\r\n    },\r\n\r\n    handleCurrentChange(val) {\r\n      this.currentPage = val;\r\n      this.getRegisterList();\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getRegisterList();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n\r\n.app-container {\r\n  padding: 20px;\r\n}\r\n\r\n.el-table {\r\n  margin-top: 10px;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAe;;EAEjBC,IAAI,EAAC,QAAQ;EAACD,KAAK,EAAC;;;EAElBE,KAAoB,EAApB;IAAA;EAAA;AAAoB;;;;;;;;uBAJ/BC,mBAAA,CAkDM,OAlDNC,UAkDM,GAjDJC,YAAA,CAgDUC,kBAAA;sBA/CR,MAOM,CAPNC,mBAAA,CAOM,OAPNC,UAOM,G,0BANJD,mBAAA,CAAkB,cAAZ,OAAK,sBACXA,mBAAA,CAIM,OAJNE,UAIM,GAHJJ,YAAA,CAEYK,oBAAA;MAFDC,IAAI,EAAC,SAAS;MAAEC,OAAK,EAAEC,QAAA,CAAAC,eAAe;MAAGC,OAAO,EAAEC,KAAA,CAAAD;;wBAAS,MAEtEE,MAAA,QAAAA,MAAA,O,iBAFsE,QAEtE,E;;kFAIJC,YAAA,CAyBWC,mBAAA;MAvBNC,IAAI,EAAEJ,KAAA,CAAAK,YAAY;MACnBC,MAAM,EAAN,EAAM;MACNpB,KAAmB,EAAnB;QAAA;MAAA;;wBAEF,MAAwD,CAAxDG,YAAA,CAAwDkB,0BAAA;QAAvCC,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC,KAAK;QAACC,KAAK,EAAC;UAChDrB,YAAA,CAA8DkB,0BAAA;QAA7CC,IAAI,EAAC,cAAc;QAACC,KAAK,EAAC,IAAI;QAACC,KAAK,EAAC;UACtDrB,YAAA,CAAgEkB,0BAAA;QAA/CC,IAAI,EAAC,gBAAgB;QAACC,KAAK,EAAC,IAAI;QAACC,KAAK,EAAC;UACxDrB,YAAA,CAA4DkB,0BAAA;QAA3CC,IAAI,EAAC,YAAY;QAACC,KAAK,EAAC,IAAI;QAACC,KAAK,EAAC;UACpDrB,YAAA,CAMkBkB,0BAAA;QANDE,KAAK,EAAC,MAAM;QAACC,KAAK,EAAC;;QACvBC,OAAO,EAAAC,QAAA,CAAEC,KAAK,KACvBtB,mBAAA,CAAmC,aAAAuB,gBAAA,CAA3BD,KAAK,CAACE,GAAG,CAACC,QAAQ,kBAC1BzB,mBAAA,CAAiD,aAAAuB,gBAAA,CAAzCjB,QAAA,CAAAoB,WAAW,CAACJ,KAAK,CAACE,GAAG,CAACG,SAAS,mBACvC3B,mBAAA,CAAqC,aAAAuB,gBAAA,CAA7BD,KAAK,CAACE,GAAG,CAACI,UAAU,iB;;;UAGhC9B,YAAA,CAA6DkB,0BAAA;QAA5CC,IAAI,EAAC,WAAW;QAACC,KAAK,EAAC,MAAM;QAACC,KAAK,EAAC;UACrDrB,YAAA,CAAgEkB,0BAAA;QAA/CC,IAAI,EAAC,cAAc;QAACC,KAAK,EAAC,MAAM;QAACC,KAAK,EAAC;UACxDrB,YAAA,CAAuDkB,0BAAA;QAAtCC,IAAI,EAAC,OAAO;QAACC,KAAK,EAAC,IAAI;QAACC,KAAK,EAAC;UAC/CrB,YAAA,CAIkBkB,0BAAA;QAJDE,KAAK,EAAC,IAAI;QAACC,KAAK,EAAC;;QACrBC,OAAO,EAAAC,QAAA,CAAEC,KAAK,K,kCACpBhB,QAAA,CAAAuB,YAAY,CAACP,KAAK,CAACE,GAAG,CAACM,MAAM,kB;;;;;;wDArBvBrB,KAAA,CAAAD,OAAO,E,GA0BtBuB,mBAAA,QAAW,EACXjC,YAAA,CASiBkC,wBAAA;MARZC,YAAW,EAAE3B,QAAA,CAAA4B,gBAAgB;MAC7BC,eAAc,EAAE7B,QAAA,CAAA8B,mBAAmB;MACnC,cAAY,EAAE3B,KAAA,CAAA4B,WAAW;MACzB,YAAU,EAAE,gBAAgB;MAC5B,WAAS,EAAE5B,KAAA,CAAA6B,QAAQ;MACpBC,MAAM,EAAC,yCAAyC;MAC/CC,KAAK,EAAE/B,KAAA,CAAA+B,KAAK;MACb7C,KAAwB,EAAxB;QAAA;MAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}