{"ast":null,"code":"import axios from 'axios';\nexport default {\n  name: 'AppealDetail',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\n      appeal: {},\n      appealOrder: this.$route.params.appealOrder,\n      error: null,\n      loading: true\n    };\n  },\n  created() {\n    this.fetchAppealDetail();\n  },\n  methods: {\n    fetchAppealDetail() {\n      this.$request.get('/registration/selectByAppealOrder', {\n        params: {\n          appealOrder: this.appealOrder\n        }\n      }).then(response => {\n        if (response.code == 200) {\n          this.appeal = response.data;\n        } else {\n          this.error = response.data.message || '获取申诉失败';\n        }\n      }).catch(error => {\n        console.error('获取申诉失败:', error);\n        this.error = '获取申诉失败，请稍后重试';\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    formatStatus(status) {\n      switch (status) {\n        case 0:\n          return '待处理';\n        case 1:\n          return '处理完成';\n        case 2:\n          return '已取消';\n        default:\n          return '未知状态';\n      }\n    },\n    formatPhone(phone) {\n      if (phone && phone.length === 11) {\n        return phone.substring(0, 3) + '****' + phone.substring(7);\n      }\n      return phone;\n    },\n    handleAppeal() {\n      console.log('开始处理申诉，申诉单号：', this.appeal.appealOrder);\n      this.$request.post(`/registration/handleAppeal/${this.appeal.appealOrder}`).then(response => {\n        if (response.code == 200) {\n          console.log('申诉处理成功');\n          this.appeal.status = 1; // 假设处理中状态码为 1\n        } else {\n          this.error = response.data.message || '处理申诉失败';\n        }\n      }).catch(error => {\n        console.error('处理申诉失败:', error);\n        this.error = '处理申诉失败，请稍后重试';\n      });\n    },\n    viewAttachment(file) {\n      if (file) {\n        window.open(this.$baseUrl + '/files/preview/' + file);\n      } else {\n        console.log('没有附件文件');\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","name","data","user","JSON","parse","localStorage","getItem","appeal","appealOrder","$route","params","error","loading","created","fetchAppealDetail","methods","$request","get","then","response","code","message","catch","console","finally","formatStatus","status","formatPhone","phone","length","substring","handleAppeal","log","post","viewAttachment","file","window","open","$baseUrl"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\hospitalAdmin\\AppealDetail.vue"],"sourcesContent":["<template>\r\n  <div class=\"appeal-detail\">\r\n    <el-button type=\"text\" @click=\"$router.go(-1)\">返回</el-button>\r\n    <h1>申诉详情</h1>\r\n    <el-descriptions :column=\"1\" border>\r\n      <el-descriptions-item label=\"申诉单号\">{{ appeal.appealOrder }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"患者姓名\">{{ appeal.patientName }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"患者电话\">{{ formatPhone(appeal.patientPhone) }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"患者性别\">{{ appeal.patientGender }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"医院\">{{ appeal.hospital }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"部门\">{{ appeal.department }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"医生\">{{ appeal.doctor }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"附件\">\r\n        <span @click=\"viewAttachment(appeal.file)\" style=\"color: blue; cursor: pointer;\">\r\n          {{ appeal.file }}\r\n        </span>\r\n      </el-descriptions-item>\r\n      <el-descriptions-item label=\"申诉内容\">{{ appeal.appealContent }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"申诉时间\">{{ appeal.appealTime }}</el-descriptions-item>\r\n      <el-descriptions-item label=\"状态\">{{ formatStatus(appeal.status) }}</el-descriptions-item>\r\n\r\n    </el-descriptions>\r\n    <!-- 根据状态动态显示按钮文本 -->\r\n    <el-button type=\"primary\" @click=\"appeal.status === 0 ? handleAppeal() : $router.go(-1)\">\r\n      <span v-if=\"appeal.status === 0\">处理申诉</span>\r\n      <span v-else-if=\"appeal.status === 1\">提交</span>\r\n    </el-button>\r\n    <p v-if=\"error\" style=\"color: red;\">{{ error }}</p>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nexport default {\r\n  name: 'AppealDetail',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\r\n      appeal: {},\r\n      appealOrder: this.$route.params.appealOrder,\r\n      error: null,\r\n      loading: true\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchAppealDetail();\r\n  },\r\n  methods: {\r\n    fetchAppealDetail() {\r\n      this.$request.get('/registration/selectByAppealOrder', {\r\n        params: {\r\n          appealOrder: this.appealOrder,\r\n        },\r\n      }).then(response => {\r\n        if (response.code == 200) {\r\n          this.appeal = response.data;\r\n        } else {\r\n          this.error = response.data.message || '获取申诉失败';\r\n        }\r\n      })\r\n          .catch(error => {\r\n            console.error('获取申诉失败:', error);\r\n            this.error = '获取申诉失败，请稍后重试';\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n    formatStatus(status) {\r\n      switch (status) {\r\n        case 0:\r\n          return '待处理';\r\n        case 1:\r\n          return '处理完成';\r\n        case 2:\r\n          return '已取消';\r\n        default:\r\n          return '未知状态';\r\n      }\r\n    },\r\n    formatPhone(phone) {\r\n      if (phone && phone.length === 11) {\r\n        return phone.substring(0, 3) + '****' + phone.substring(7);\r\n      }\r\n      return phone;\r\n    },\r\n    handleAppeal() {\r\n      console.log('开始处理申诉，申诉单号：', this.appeal.appealOrder);\r\n      this.$request.post(`/registration/handleAppeal/${this.appeal.appealOrder}`).then(response => {\r\n        if (response.code == 200) {\r\n          console.log('申诉处理成功');\r\n          this.appeal.status = 1; // 假设处理中状态码为 1\r\n        } else {\r\n          this.error = response.data.message || '处理申诉失败';\r\n        }\r\n      }).catch(error => {\r\n        console.error('处理申诉失败:', error);\r\n        this.error = '处理申诉失败，请稍后重试';\r\n      });\r\n    },\r\n    viewAttachment(file) {\r\n      if (file) {\r\n        window.open(this.$baseUrl + '/files/preview/' + file)\r\n      } else {\r\n        console.log('没有附件文件');\r\n      }\r\n    },\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.appeal-detail {\r\n  padding: 20px;\r\n}\r\n\r\n.el-descriptions {\r\n  margin-top: 20px;\r\n}\r\n</style>"],"mappings":"AAgCA,OAAOA,KAAI,MAAO,OAAO;AACzB,eAAe;EACbC,IAAI,EAAE,cAAc;EACpBC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC;MACzDC,MAAM,EAAE,CAAC,CAAC;MACVC,WAAW,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF,WAAW;MAC3CG,KAAK,EAAE,IAAI;MACXC,OAAO,EAAE;IACX,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACC,iBAAiB,CAAC,CAAC;EAC1B,CAAC;EACDC,OAAO,EAAE;IACPD,iBAAiBA,CAAA,EAAG;MAClB,IAAI,CAACE,QAAQ,CAACC,GAAG,CAAC,mCAAmC,EAAE;QACrDP,MAAM,EAAE;UACNF,WAAW,EAAE,IAAI,CAACA;QACpB;MACF,CAAC,CAAC,CAACU,IAAI,CAACC,QAAO,IAAK;QAClB,IAAIA,QAAQ,CAACC,IAAG,IAAK,GAAG,EAAE;UACxB,IAAI,CAACb,MAAK,GAAIY,QAAQ,CAAClB,IAAI;QAC7B,OAAO;UACL,IAAI,CAACU,KAAI,GAAIQ,QAAQ,CAAClB,IAAI,CAACoB,OAAM,IAAK,QAAQ;QAChD;MACF,CAAC,EACIC,KAAK,CAACX,KAAI,IAAK;QACdY,OAAO,CAACZ,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;QAC/B,IAAI,CAACA,KAAI,GAAI,cAAc;MAC7B,CAAC,EACAa,OAAO,CAAC,MAAM;QACb,IAAI,CAACZ,OAAM,GAAI,KAAK;MACtB,CAAC,CAAC;IACR,CAAC;IACDa,YAAYA,CAACC,MAAM,EAAE;MACnB,QAAQA,MAAM;QACZ,KAAK,CAAC;UACJ,OAAO,KAAK;QACd,KAAK,CAAC;UACJ,OAAO,MAAM;QACf,KAAK,CAAC;UACJ,OAAO,KAAK;QACd;UACE,OAAO,MAAM;MACjB;IACF,CAAC;IACDC,WAAWA,CAACC,KAAK,EAAE;MACjB,IAAIA,KAAI,IAAKA,KAAK,CAACC,MAAK,KAAM,EAAE,EAAE;QAChC,OAAOD,KAAK,CAACE,SAAS,CAAC,CAAC,EAAE,CAAC,IAAI,MAAK,GAAIF,KAAK,CAACE,SAAS,CAAC,CAAC,CAAC;MAC5D;MACA,OAAOF,KAAK;IACd,CAAC;IACDG,YAAYA,CAAA,EAAG;MACbR,OAAO,CAACS,GAAG,CAAC,cAAc,EAAE,IAAI,CAACzB,MAAM,CAACC,WAAW,CAAC;MACpD,IAAI,CAACQ,QAAQ,CAACiB,IAAI,CAAE,8BAA6B,IAAI,CAAC1B,MAAM,CAACC,WAAY,EAAC,CAAC,CAACU,IAAI,CAACC,QAAO,IAAK;QAC3F,IAAIA,QAAQ,CAACC,IAAG,IAAK,GAAG,EAAE;UACxBG,OAAO,CAACS,GAAG,CAAC,QAAQ,CAAC;UACrB,IAAI,CAACzB,MAAM,CAACmB,MAAK,GAAI,CAAC,EAAE;QAC1B,OAAO;UACL,IAAI,CAACf,KAAI,GAAIQ,QAAQ,CAAClB,IAAI,CAACoB,OAAM,IAAK,QAAQ;QAChD;MACF,CAAC,CAAC,CAACC,KAAK,CAACX,KAAI,IAAK;QAChBY,OAAO,CAACZ,KAAK,CAAC,SAAS,EAAEA,KAAK,CAAC;QAC/B,IAAI,CAACA,KAAI,GAAI,cAAc;MAC7B,CAAC,CAAC;IACJ,CAAC;IACDuB,cAAcA,CAACC,IAAI,EAAE;MACnB,IAAIA,IAAI,EAAE;QACRC,MAAM,CAACC,IAAI,CAAC,IAAI,CAACC,QAAO,GAAI,iBAAgB,GAAIH,IAAI;MACtD,OAAO;QACLZ,OAAO,CAACS,GAAG,CAAC,QAAQ,CAAC;MACvB;IACF;EAEF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}