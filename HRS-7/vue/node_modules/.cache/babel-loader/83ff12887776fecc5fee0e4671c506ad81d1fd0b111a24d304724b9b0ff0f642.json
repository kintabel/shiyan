{"ast":null,"code":"export default {\n  name: 'HealthArticlePublish',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\n      loading: false,\n      articleForm: {\n        title: '',\n        content: '',\n        category: '',\n        hospitalId: ''\n      },\n      categories: [{\n        value: '饮食健康',\n        label: '饮食健康'\n      }, {\n        value: '运动保健',\n        label: '运动保健'\n      }, {\n        value: '疾病预防',\n        label: '疾病预防'\n      }, {\n        value: '心理健康',\n        label: '心理健康'\n      }, {\n        value: '育儿知识',\n        label: '育儿知识'\n      }],\n      rules: {\n        title: [{\n          required: true,\n          message: '请输入文章标题',\n          trigger: 'blur'\n        }, {\n          min: 5,\n          max: 50,\n          message: '长度在 5 到 50 个字符',\n          trigger: 'blur'\n        }],\n        category: [{\n          required: true,\n          message: '请选择文章分类',\n          trigger: 'change'\n        }],\n        content: [{\n          required: true,\n          message: '请输入文章内容',\n          trigger: 'blur'\n        }, {\n          min: 100,\n          message: '内容至少需要100个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm() {\n      this.$refs.articleForm.validate(valid => {\n        if (valid) {\n          this.loading = true;\n          this.articleForm.hospitalId = this.user.id;\n          this.$request.post('admin/addHealthArticle', this.articleForm).then(response => {\n            if (response.code == 200) {\n              this.$message.success('发布成功');\n              this.resetForm();\n            } else {\n              this.$message.error(response.message || '操作失败');\n            }\n          }).catch(error => {\n            console.error('操作失败:', error);\n            this.$message.error('操作失败，请稍后重试');\n          }).finally(() => {\n            this.loading = false;\n          });\n        }\n      });\n    },\n    resetForm() {\n      this.$refs.articleForm.resetFields();\n    }\n  }\n};","map":{"version":3,"names":["name","data","user","JSON","parse","localStorage","getItem","loading","articleForm","title","content","category","hospitalId","categories","value","label","rules","required","message","trigger","min","max","methods","submitForm","$refs","validate","valid","id","$request","post","then","response","code","$message","success","resetForm","error","catch","console","finally","resetFields"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\hospitalAdmin\\HealthArticle.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>发布健康科普文章</span>\r\n        <div style=\"float: right\">\r\n          <el-button\r\n              type=\"success\"\r\n              @click=\"submitForm('publish')\"\r\n              :loading=\"loading\"\r\n          >\r\n            立即发布\r\n          </el-button>\r\n        </div>\r\n      </div>\r\n\r\n      <el-form\r\n          :model=\"articleForm\"\r\n          :rules=\"rules\"\r\n          ref=\"articleForm\"\r\n          label-width=\"100px\"\r\n      >\r\n        <el-form-item label=\"文章标题\" prop=\"title\">\r\n          <el-input\r\n              v-model=\"articleForm.title\"\r\n              placeholder=\"请输入文章标题\"\r\n              maxlength=\"50\"\r\n              show-word-limit\r\n          ></el-input>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"文章分类\" prop=\"category\">\r\n          <el-select\r\n              v-model=\"articleForm.category\"\r\n              placeholder=\"请选择分类\"\r\n              style=\"width: 100%\"\r\n          >\r\n            <el-option\r\n                v-for=\"item in categories\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n\r\n        <el-form-item label=\"文章内容\" prop=\"content\">\r\n          <!-- 富文本编辑器 -->\r\n          <el-input\r\n              type=\"textarea\"\r\n              v-model=\"articleForm.content\"\r\n              :rows=\"10\"\r\n              placeholder=\"请输入文章内容\"\r\n          ></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'HealthArticlePublish',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\r\n      loading: false,\r\n      articleForm: {\r\n        title: '',\r\n        content: '',\r\n        category: '',\r\n        hospitalId: '',\r\n      },\r\n      categories: [\r\n        { value: '饮食健康', label: '饮食健康' },\r\n        { value: '运动保健', label: '运动保健' },\r\n        { value: '疾病预防', label: '疾病预防' },\r\n        { value: '心理健康', label: '心理健康' },\r\n        { value: '育儿知识', label: '育儿知识' }\r\n      ],\r\n      rules: {\r\n        title: [\r\n          { required: true, message: '请输入文章标题', trigger: 'blur' },\r\n          { min: 5, max: 50, message: '长度在 5 到 50 个字符', trigger: 'blur' }\r\n        ],\r\n        category: [\r\n          { required: true, message: '请选择文章分类', trigger: 'change' }\r\n        ],\r\n        content: [\r\n          { required: true, message: '请输入文章内容', trigger: 'blur' },\r\n          { min: 100, message: '内容至少需要100个字符', trigger: 'blur' }\r\n        ]\r\n      }\r\n    };\r\n  },\r\n  methods: {\r\n    submitForm() {\r\n      this.$refs.articleForm.validate(valid => {\r\n        if (valid) {\r\n          this.loading = true;\r\n          this.articleForm.hospitalId = this.user.id;\r\n          this.$request.post('admin/addHealthArticle', this.articleForm)\r\n              .then(response => {\r\n                if (response.code == 200) {\r\n                  this.$message.success( '发布成功');\r\n                  this.resetForm();\r\n                } else {\r\n                  this.$message.error(response.message || '操作失败');\r\n                }\r\n              })\r\n              .catch(error => {\r\n                console.error('操作失败:', error);\r\n                this.$message.error('操作失败，请稍后重试');\r\n              })\r\n              .finally(() => {\r\n                this.loading = false;\r\n              });\r\n        }\r\n      });\r\n    },\r\n\r\n    resetForm() {\r\n      this.$refs.articleForm.resetFields();\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.clearfix:before,\r\n.clearfix:after {\r\n  display: table;\r\n  content: \"\";\r\n}\r\n.clearfix:after {\r\n  clear: both;\r\n}\r\n\r\n.app-container {\r\n  padding: 20px;\r\n}\r\n\r\n.el-form {\r\n  margin-top: 20px;\r\n}\r\n\r\n.el-textarea {\r\n  font-family: \"Helvetica Neue\", Helvetica, \"PingFang SC\", \"Hiragino Sans GB\", Arial, sans-serif;\r\n}\r\n</style>"],"mappings":"AA6DA,eAAe;EACbA,IAAI,EAAE,sBAAsB;EAC5BC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,SAAS,KAAK,IAAI,CAAC;MACzDC,OAAO,EAAE,KAAK;MACdC,WAAW,EAAE;QACXC,KAAK,EAAE,EAAE;QACTC,OAAO,EAAE,EAAE;QACXC,QAAQ,EAAE,EAAE;QACZC,UAAU,EAAE;MACd,CAAC;MACDC,UAAU,EAAE,CACV;QAAEC,KAAK,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAC,EAChC;QAAED,KAAK,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAC,EAChC;QAAED,KAAK,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAC,EAChC;QAAED,KAAK,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,CAAC,EAChC;QAAED,KAAK,EAAE,MAAM;QAAEC,KAAK,EAAE;MAAO,EAChC;MACDC,KAAK,EAAE;QACLP,KAAK,EAAE,CACL;UAAEQ,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,SAAS;UAAEC,OAAO,EAAE;QAAO,CAAC,EACvD;UAAEC,GAAG,EAAE,CAAC;UAAEC,GAAG,EAAE,EAAE;UAAEH,OAAO,EAAE,gBAAgB;UAAEC,OAAO,EAAE;QAAO,EAC/D;QACDR,QAAQ,EAAE,CACR;UAAEM,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,SAAS;UAAEC,OAAO,EAAE;QAAS,EACzD;QACDT,OAAO,EAAE,CACP;UAAEO,QAAQ,EAAE,IAAI;UAAEC,OAAO,EAAE,SAAS;UAAEC,OAAO,EAAE;QAAO,CAAC,EACvD;UAAEC,GAAG,EAAE,GAAG;UAAEF,OAAO,EAAE,cAAc;UAAEC,OAAO,EAAE;QAAO;MAEzD;IACF,CAAC;EACH,CAAC;EACDG,OAAO,EAAE;IACPC,UAAUA,CAAA,EAAG;MACX,IAAI,CAACC,KAAK,CAAChB,WAAW,CAACiB,QAAQ,CAACC,KAAI,IAAK;QACvC,IAAIA,KAAK,EAAE;UACT,IAAI,CAACnB,OAAM,GAAI,IAAI;UACnB,IAAI,CAACC,WAAW,CAACI,UAAS,GAAI,IAAI,CAACV,IAAI,CAACyB,EAAE;UAC1C,IAAI,CAACC,QAAQ,CAACC,IAAI,CAAC,wBAAwB,EAAE,IAAI,CAACrB,WAAW,EACxDsB,IAAI,CAACC,QAAO,IAAK;YAChB,IAAIA,QAAQ,CAACC,IAAG,IAAK,GAAG,EAAE;cACxB,IAAI,CAACC,QAAQ,CAACC,OAAO,CAAE,MAAM,CAAC;cAC9B,IAAI,CAACC,SAAS,CAAC,CAAC;YAClB,OAAO;cACL,IAAI,CAACF,QAAQ,CAACG,KAAK,CAACL,QAAQ,CAACb,OAAM,IAAK,MAAM,CAAC;YACjD;UACF,CAAC,EACAmB,KAAK,CAACD,KAAI,IAAK;YACdE,OAAO,CAACF,KAAK,CAAC,OAAO,EAAEA,KAAK,CAAC;YAC7B,IAAI,CAACH,QAAQ,CAACG,KAAK,CAAC,YAAY,CAAC;UACnC,CAAC,EACAG,OAAO,CAAC,MAAM;YACb,IAAI,CAAChC,OAAM,GAAI,KAAK;UACtB,CAAC,CAAC;QACR;MACF,CAAC,CAAC;IACJ,CAAC;IAED4B,SAASA,CAAA,EAAG;MACV,IAAI,CAACX,KAAK,CAAChB,WAAW,CAACgC,WAAW,CAAC,CAAC;IACtC;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}