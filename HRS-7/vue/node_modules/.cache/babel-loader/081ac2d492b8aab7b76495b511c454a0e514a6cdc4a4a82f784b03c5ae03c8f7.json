{"ast":null,"code":"export default {\n  name: \"Purchase\",\n  data() {\n    return {\n      purchaseForm: {\n        name: \"\",\n        quantity: 0\n      },\n      purchaseRules: {\n        quantity: [{\n          required: true,\n          message: \"请输入进货数量\",\n          trigger: \"blur\"\n        }, {\n          type: \"number\",\n          min: 1,\n          message: \"进货数量必须为正整数\",\n          trigger: \"blur\"\n        }]\n      },\n      message: \"\",\n      supplyList: [],\n      // 用于加载状态的标志\n      loading: false\n    };\n  },\n  created() {\n    const name = this.$route.query.name;\n    this.purchaseForm.name = name;\n    this.fetchSupplyDetail(name);\n  },\n  methods: {\n    // 获取供应商详情的方法\n    async fetchSupplyDetail(name) {\n      try {\n        this.loading = true;\n        const response = await this.$request.get(\"/stock/selectSupplier\", {\n          params: {\n            name: name\n          }\n        });\n        if (response.code == 200) {\n          this.supplyList = response.data;\n        } else {\n          this.message = response.data.message || \"获取数据失败\";\n        }\n      } catch (error) {\n        console.error(\"获取数据失败:\", error);\n        this.message = \"获取数据失败，请稍后重试\";\n      } finally {\n        this.loading = false;\n      }\n    },\n    // 提交进货的方法\n    async submitPurchase() {\n      this.$refs.purchaseFormRef.validate(async valid => {\n        if (valid) {\n          try {\n            const response = await this.$request.post(\"/stock/purchase\", this.purchaseForm);\n            if (response.code === 200) {\n              this.message = \"进货成功\";\n              // 清空表单数据\n              this.purchaseForm.name = \"\";\n              this.purchaseForm.quantity = 0;\n            } else {\n              this.message = \"进货失败：\" + response.data.message;\n            }\n          } catch (error) {\n            console.error(\"进货请求失败:\", error);\n            this.message = \"进货请求失败，请稍后重试\";\n          }\n        }\n      });\n    },\n    // 重置表单的方法\n    resetForm() {\n      this.$refs.purchaseFormRef.resetFields();\n      this.message = \"\";\n    }\n  }\n};","map":{"version":3,"names":["name","data","purchaseForm","quantity","purchaseRules","required","message","trigger","type","min","supplyList","loading","created","$route","query","fetchSupplyDetail","methods","response","$request","get","params","code","error","console","submitPurchase","$refs","purchaseFormRef","validate","valid","post","resetForm","resetFields"],"sources":["src/views/hospitalAdmin/purchase.vue"],"sourcesContent":["<template>\r\n  <div class=\"purchase-page\">\r\n    <!-- 页面标题 -->\r\n    <h2 class=\"page-title\">进货管理</h2>\r\n    <!-- 进货表单 -->\r\n    <el-form :model=\"purchaseForm\" :rules=\"purchaseRules\" ref=\"purchaseFormRef\" label-width=\"120px\">\r\n      <el-form-item label=\"物品名称\">\r\n        <span>{{ purchaseForm.name }}</span>\r\n      </el-form-item>\r\n      <el-form-item label=\"进货数量\" prop=\"quantity\">\r\n        <el-input v-model.number=\"purchaseForm.quantity\" placeholder=\"请输入进货数量\" type=\"number\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"submitPurchase\">提交进货</el-button>\r\n        <el-button @click=\"resetForm\">重置</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 提示信息 -->\r\n    <div v-if=\"message\" class=\"message\">{{ message }}</div>\r\n    <!-- 供应商列表 -->\r\n    <div v-if=\"supplyList.length > 0\">\r\n      <h3>供应商列表</h3>\r\n      <table class=\"supply-table\">\r\n        <thead>\r\n        <tr>\r\n          <th>名称</th>\r\n          <th>价格</th>\r\n          <th>电话</th>\r\n          <th>地址</th>\r\n          <th>负责人</th>\r\n        </tr>\r\n        </thead>\r\n        <tbody>\r\n        <tr v-for=\"(supply, index) in supplyList\" :key=\"index\">\r\n          <td>{{ supply.name }}</td>\r\n          <td>{{ supply.price }}</td>\r\n          <td>{{ supply.phone }}</td>\r\n          <td>{{ supply.address }}</td>\r\n          <td>{{ supply.leader }}</td>\r\n        </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Purchase\",\r\n  data() {\r\n    return {\r\n      purchaseForm: {\r\n        name: \"\",\r\n        quantity: 0\r\n      },\r\n      purchaseRules: {\r\n        quantity: [\r\n          { required: true, message: \"请输入进货数量\", trigger: \"blur\" },\r\n          { type: \"number\", min: 1, message: \"进货数量必须为正整数\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n      message: \"\",\r\n      supplyList: [],\r\n      // 用于加载状态的标志\r\n      loading: false\r\n    };\r\n  },\r\n  created() {\r\n    const name = this.$route.query.name;\r\n    this.purchaseForm.name = name;\r\n    this.fetchSupplyDetail(name);\r\n  },\r\n  methods: {\r\n    // 获取供应商详情的方法\r\n    async fetchSupplyDetail(name) {\r\n      try {\r\n        this.loading = true;\r\n        const response = await this.$request.get(\"/stock/selectSupplier\", {\r\n          params: {\r\n            name: name\r\n          }\r\n        });\r\n        if (response.code == 200) {\r\n          this.supplyList = response.data;\r\n        } else {\r\n          this.message = response.data.message || \"获取数据失败\";\r\n        }\r\n      } catch (error) {\r\n        console.error(\"获取数据失败:\", error);\r\n        this.message = \"获取数据失败，请稍后重试\";\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    // 提交进货的方法\r\n    async submitPurchase() {\r\n      this.$refs.purchaseFormRef.validate(async (valid) => {\r\n        if (valid) {\r\n          try {\r\n            const response = await this.$request.post(\"/stock/purchase\", this.purchaseForm);\r\n            if (response.code === 200) {\r\n              this.message = \"进货成功\";\r\n              // 清空表单数据\r\n              this.purchaseForm.name = \"\";\r\n              this.purchaseForm.quantity = 0;\r\n            } else {\r\n              this.message = \"进货失败：\" + response.data.message;\r\n            }\r\n          } catch (error) {\r\n            console.error(\"进货请求失败:\", error);\r\n            this.message = \"进货请求失败，请稍后重试\";\r\n          }\r\n        }\r\n      });\r\n    },\r\n    // 重置表单的方法\r\n    resetForm() {\r\n      this.$refs.purchaseFormRef.resetFields();\r\n      this.message = \"\";\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.purchase-page {\r\n  padding: 20px;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\n.page-title {\r\n  margin-bottom: 20px;\r\n  font-size: 24px;\r\n  font-weight: bold;\r\n}\r\n\r\n.message {\r\n  margin-top: 10px;\r\n  color: green;\r\n}\r\n\r\n.supply-table {\r\n  width: 100%;\r\n  border-collapse: collapse;\r\n  margin-top: 10px;\r\n}\r\n\r\n.supply-table th,\r\n.supply-table td {\r\n  padding: 10px;\r\n  border: 1px solid #ddd;\r\n  text-align: left;\r\n}\r\n\r\n.supply-table th {\r\n  background-color: #f2f2f2;\r\n  font-weight: bold;\r\n}\r\n\r\n.supply-table tr:nth-child(even) {\r\n  background-color: #f9f9f9;\r\n}\r\n\r\n.supply-table tr:hover {\r\n  background-color: #f1f1f1;\r\n}\r\n</style>"],"mappings":"AA+CA;EACAA,IAAA;EACAC,KAAA;IACA;MACAC,YAAA;QACAF,IAAA;QACAG,QAAA;MACA;MACAC,aAAA;QACAD,QAAA,GACA;UAAAE,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,IAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA;MAEA;MACAD,OAAA;MACAI,UAAA;MACA;MACAC,OAAA;IACA;EACA;EACAC,QAAA;IACA,MAAAZ,IAAA,QAAAa,MAAA,CAAAC,KAAA,CAAAd,IAAA;IACA,KAAAE,YAAA,CAAAF,IAAA,GAAAA,IAAA;IACA,KAAAe,iBAAA,CAAAf,IAAA;EACA;EACAgB,OAAA;IACA;IACA,MAAAD,kBAAAf,IAAA;MACA;QACA,KAAAW,OAAA;QACA,MAAAM,QAAA,cAAAC,QAAA,CAAAC,GAAA;UACAC,MAAA;YACApB,IAAA,EAAAA;UACA;QACA;QACA,IAAAiB,QAAA,CAAAI,IAAA;UACA,KAAAX,UAAA,GAAAO,QAAA,CAAAhB,IAAA;QACA;UACA,KAAAK,OAAA,GAAAW,QAAA,CAAAhB,IAAA,CAAAK,OAAA;QACA;MACA,SAAAgB,KAAA;QACAC,OAAA,CAAAD,KAAA,YAAAA,KAAA;QACA,KAAAhB,OAAA;MACA;QACA,KAAAK,OAAA;MACA;IACA;IACA;IACA,MAAAa,eAAA;MACA,KAAAC,KAAA,CAAAC,eAAA,CAAAC,QAAA,OAAAC,KAAA;QACA,IAAAA,KAAA;UACA;YACA,MAAAX,QAAA,cAAAC,QAAA,CAAAW,IAAA,yBAAA3B,YAAA;YACA,IAAAe,QAAA,CAAAI,IAAA;cACA,KAAAf,OAAA;cACA;cACA,KAAAJ,YAAA,CAAAF,IAAA;cACA,KAAAE,YAAA,CAAAC,QAAA;YACA;cACA,KAAAG,OAAA,aAAAW,QAAA,CAAAhB,IAAA,CAAAK,OAAA;YACA;UACA,SAAAgB,KAAA;YACAC,OAAA,CAAAD,KAAA,YAAAA,KAAA;YACA,KAAAhB,OAAA;UACA;QACA;MACA;IACA;IACA;IACAwB,UAAA;MACA,KAAAL,KAAA,CAAAC,eAAA,CAAAK,WAAA;MACA,KAAAzB,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}