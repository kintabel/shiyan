{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withCtx as _withCtx, createTextVNode as _createTextVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"doctor-page-table\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_3 = {\n  \"slot-scope\": \"scope\"\n};\nconst _hoisted_4 = {\n  \"slot-scope\": \"scope\"\n};\nconst _hoisted_5 = {\n  \"slot-scope\": \"scope\"\n};\nconst _hoisted_6 = {\n  \"slot-scope\": \"scope\"\n};\nconst _hoisted_7 = {\n  \"slot-scope\": \"scope\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_spinner = _resolveComponent(\"el-spinner\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [$data.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_el_spinner), _cache[2] || (_cache[2] = _createElementVNode(\"span\", null, \"正在加载数据...\", -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true), _cache[5] || (_cache[5] = _createElementVNode(\"h4\", null, \"住院档案\", -1 /* HOISTED */)), _createVNode(_component_el_table, {\n    data: $data.hospitalizationRecords,\n    stripe: \"\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      label: \"医院\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_3, [_createElementVNode(\"span\", null, _toDisplayString(_ctx.scope.row.hospitalName), 1 /* TEXT */)])]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"科室\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_4, [_createElementVNode(\"span\", null, _toDisplayString(_ctx.scope.row.departmentName), 1 /* TEXT */)])]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"医生\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_5, [_createElementVNode(\"span\", null, _toDisplayString(_ctx.scope.row.doctorName), 1 /* TEXT */)])]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"病人姓名\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_6, [_createElementVNode(\"span\", null, _toDisplayString(_ctx.scope.row.userName), 1 /* TEXT */)])]),\n\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_7, [_createVNode(_component_el_button, {\n        onClick: _cache[0] || (_cache[0] = $event => $options.viewArchive(_ctx.scope.row.id))\n      }, {\n        default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"查看档案\")])),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_button, {\n        onClick: _cache[1] || (_cache[1] = $event => $options.addArchive(_ctx.scope.row.id))\n      }, {\n        default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\"添加信息\")])),\n        _: 1 /* STABLE */\n      })])]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","$data","isLoading","_hoisted_2","_createVNode","_component_el_spinner","_createElementVNode","_component_el_table","data","hospitalizationRecords","stripe","_component_el_table_column","label","_hoisted_3","_toDisplayString","_ctx","scope","row","hospitalName","_hoisted_4","departmentName","_hoisted_5","doctorName","_hoisted_6","userName","_hoisted_7","_component_el_button","onClick","_cache","$event","$options","viewArchive","id","addArchive"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\doctor\\MedicalRecords.vue"],"sourcesContent":["<template>\r\n  <div class=\"doctor-page-table\">\r\n    <div v-if=\"isLoading\" class=\"loading-container\">\r\n      <el-spinner />\r\n      <span>正在加载数据...</span>\r\n    </div>\r\n        <h4>住院档案</h4>\r\n        <el-table :data=\"hospitalizationRecords\" stripe>\r\n          <el-table-column  label=\"医院\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.hospitalName }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column  label=\"科室\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.departmentName }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column  label=\"医生\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.doctorName }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column  label=\"病人姓名\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.userName }}</span>\r\n            </template>\r\n            </el-table-column>\r\n\r\n          <el-table-column label=\"操作\">\r\n            <template slot-scope=\"scope\">\r\n              <el-button @click=\"viewArchive(scope.row.id)\">查看档案</el-button>\r\n              <el-button @click=\"addArchive(scope.row.id)\">添加信息</el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n</template>\r\n\r\n<script>\r\nimport { parseTime } from '@/utils'\r\n\r\nexport default {\r\n  name: 'ArchivesManagement',\r\n  data() {\r\n    return {\r\n      userInfo: null,\r\n      isLoading: true,\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      hospitalizationRecords: [],\r\n    }\r\n  },\r\n\r\n  async created() {\r\n    const doctorId = this.user.id;\r\n    try {\r\n      await this.fetchHospitalizationRecords(doctorId);\r\n    } catch (error) {\r\n      console.error('数据加载出错:', error);\r\n    }\r\n  },\r\n  methods: {\r\n\r\n    async fetchHospitalizationRecords(doctorId) {\r\n      try {\r\n        const response = await this.$request.get(`/doctor/selectArchives/${doctorId}`);\r\n        if (response.data) {\r\n          this.hospitalizationRecords = response.data;\r\n          console.log('住院记录:', this.hospitalizationRecords);\r\n        } else {\r\n          this.handleError('获取住院详细信息失败', response.data);\r\n        }\r\n      } catch (error) {\r\n        this.handleError('获取住院详细信息失败', error);\r\n      } finally {\r\n        this.isLoading = false;\r\n      }\r\n    },\r\n\r\n    addArchive(hospitalizationId){\r\n      console.log('添加信息:', hospitalizationId);\r\n      this.$router.push({\r\n        path: 'archivesAddDoctor',\r\n        query: { hospitalizationId: hospitalizationId }\r\n      })\r\n    },\r\n\r\n    handleError(message, error) {\r\n      console.error(message, error);\r\n      this.$message.error(message);\r\n    },\r\n\r\n    viewArchive(hospitalizationId) {\r\n      console.log('查看档案:', hospitalizationId);\r\n      this.$router.push({\r\n        path: 'archivesViewDoctor',\r\n        query: { hospitalizationId: hospitalizationId }\r\n      })\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.doctor-page-table {\r\n  padding: 20px;\r\n}\r\n\r\n.loading-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 50px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.el-button.is-disabled {\r\n  cursor: not-allowed;\r\n}\r\n</style>"],"mappings":";;EACOA,KAAK,EAAC;AAAmB;;;EACNA,KAAK,EAAC;;;EAOV,YAAU,EAAC;AAAO;;EAMlB,YAAU,EAAC;AAAO;;EAMlB,YAAU,EAAC;AAAO;;EAMlB,YAAU,EAAC;AAAO;;EAMlB,YAAU,EAAC;AAAO;;;;;;uBAhCtCC,mBAAA,CAsCU,OAtCVC,UAsCU,GArCGC,KAAA,CAAAC,SAAS,I,cAApBH,mBAAA,CAGM,OAHNI,UAGM,GAFJC,YAAA,CAAcC,qBAAA,G,0BACdC,mBAAA,CAAsB,cAAhB,WAAS,qB,kEAEbA,mBAAA,CAAa,YAAT,MAAI,sBACRF,YAAA,CA+BWG,mBAAA;IA/BAC,IAAI,EAAEP,KAAA,CAAAQ,sBAAsB;IAAEC,MAAM,EAAN;;sBACvC,MAIkB,CAJlBN,YAAA,CAIkBO,0BAAA;MAJAC,KAAK,EAAC;IAAI;wBAC1B,MAEW,CAFXN,mBAAA,CAEW,YAFXO,UAEW,GADTP,mBAAA,CAAyC,cAAAQ,gBAAA,CAAhCC,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACC,YAAY,iB;;;QAInCd,YAAA,CAIkBO,0BAAA;MAJAC,KAAK,EAAC;IAAI;wBAC1B,MAEW,CAFXN,mBAAA,CAEW,YAFXa,UAEW,GADTb,mBAAA,CAA2C,cAAAQ,gBAAA,CAAlCC,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACG,cAAc,iB;;;QAIrChB,YAAA,CAIkBO,0BAAA;MAJAC,KAAK,EAAC;IAAI;wBAC1B,MAEW,CAFXN,mBAAA,CAEW,YAFXe,UAEW,GADTf,mBAAA,CAAuC,cAAAQ,gBAAA,CAA9BC,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACK,UAAU,iB;;;QAIjClB,YAAA,CAIoBO,0BAAA;MAJFC,KAAK,EAAC;IAAM;wBAC5B,MAEW,CAFXN,mBAAA,CAEW,YAFXiB,UAEW,GADTjB,mBAAA,CAAqC,cAAAQ,gBAAA,CAA5BC,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACO,QAAQ,iB;;;QAI/BpB,YAAA,CAKkBO,0BAAA;MALDC,KAAK,EAAC;IAAI;wBACzB,MAGW,CAHXN,mBAAA,CAGW,YAHXmB,UAGW,GAFTrB,YAAA,CAA8DsB,oBAAA;QAAlDC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAC,WAAW,CAAChB,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACe,EAAE;;0BAAG,MAAIJ,MAAA,QAAAA,MAAA,O,iBAAJ,MAAI,E;;UAClDxB,YAAA,CAA6DsB,oBAAA;QAAjDC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,QAAA,CAAAG,UAAU,CAAClB,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACe,EAAE;;0BAAG,MAAIJ,MAAA,QAAAA,MAAA,O,iBAAJ,MAAI,E"},"metadata":{},"sourceType":"module","externalDependencies":[]}