{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withKeys as _withKeys, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString } from \"vue\";\nconst _hoisted_1 = {\n  class: \"search-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"loading-container\"\n};\nconst _hoisted_3 = {\n  \"slot-scope\": \"scope\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_spinner = _resolveComponent(\"el-spinner\");\n  const _component_el_link = _resolveComponent(\"el-link\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_pagination = _resolveComponent(\"el-pagination\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createCommentVNode(\" 搜索框 \"), _createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_input, {\n    modelValue: $data.searchKeyword,\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.searchKeyword = $event),\n    placeholder: \"请输入医院名称\",\n    onKeyup: _cache[1] || (_cache[1] = _withKeys($event => $options.fetchHospitalList(1), [\"enter\"])),\n    class: \"search-input\"\n  }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n    onClick: _cache[2] || (_cache[2] = $event => $options.fetchHospitalList(1)),\n    class: \"search-button\",\n    icon: \"el-icon-search\"\n  }, {\n    default: _withCtx(() => _cache[4] || (_cache[4] = [_createTextVNode(\" 搜索 \")])),\n    _: 1 /* STABLE */\n  })]), _createCommentVNode(\" 数据加载中提示 \"), $data.isLoading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_el_spinner), _cache[5] || (_cache[5] = _createElementVNode(\"span\", null, \"正在加载数据...\", -1 /* HOISTED */))])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 医院列表 \"), _createVNode(_component_el_table, {\n    data: $data.hospitalList,\n    stripe: \"\",\n    class: \"hospital-table\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"name\",\n      label: \"医院名称\"\n    }, {\n      default: _withCtx(() => [_createElementVNode(\"template\", _hoisted_3, [_createVNode(_component_el_link, {\n        type: \"primary\",\n        onClick: _cache[3] || (_cache[3] = $event => $options.goToHospitalDetail(_ctx.scope.row.id)),\n        class: \"hospital-link\"\n      }, {\n        default: _withCtx(() => [_createTextVNode(_toDisplayString(_ctx.scope.row.name), 1 /* TEXT */)]),\n\n        _: 1 /* STABLE */\n      })])]),\n\n      _: 1 /* STABLE */\n    })]),\n\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"]), _createCommentVNode(\" 分页 \"), _createVNode(_component_el_pagination, {\n    background: \"\",\n    layout: \"prev, pager, next\",\n    \"current-page\": $data.currentPage,\n    \"page-size\": $data.pageSize,\n    total: $data.totalHospitals,\n    onCurrentChange: $options.handlePageChange,\n    class: \"pagination-container\"\n  }, null, 8 /* PROPS */, [\"current-page\", \"page-size\", \"total\", \"onCurrentChange\"])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_createCommentVNode","_createElementVNode","_hoisted_1","_createVNode","_component_el_input","$data","searchKeyword","$event","placeholder","onKeyup","_cache","_withKeys","$options","fetchHospitalList","_component_el_button","onClick","icon","isLoading","_hoisted_2","_component_el_spinner","_component_el_table","data","hospitalList","stripe","_component_el_table_column","prop","label","_hoisted_3","_component_el_link","type","goToHospitalDetail","_ctx","scope","row","id","name","_component_el_pagination","background","layout","currentPage","pageSize","total","totalHospitals","onCurrentChange","handlePageChange"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\user\\Reservation.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <!-- 搜索框 -->\r\n    <div class=\"search-container\">\r\n      <el-input\r\n          v-model=\"searchKeyword\"\r\n          placeholder=\"请输入医院名称\"\r\n          @keyup.enter=\"fetchHospitalList(1)\"\r\n          class=\"search-input\"\r\n      />\r\n      <el-button\r\n          @click=\"fetchHospitalList(1)\"\r\n          class=\"search-button\"\r\n          icon=\"el-icon-search\"\r\n      >\r\n        搜索\r\n      </el-button>\r\n    </div>\r\n\r\n    <!-- 数据加载中提示 -->\r\n    <div v-if=\"isLoading\" class=\"loading-container\">\r\n      <el-spinner />\r\n      <span>正在加载数据...</span>\r\n    </div>\r\n\r\n    <!-- 医院列表 -->\r\n    <el-table :data=\"hospitalList\" stripe class=\"hospital-table\">\r\n      <el-table-column prop=\"name\" label=\"医院名称\">\r\n        <template slot-scope=\"scope\">\r\n          <el-link\r\n              type=\"primary\"\r\n              @click=\"goToHospitalDetail(scope.row.id)\"\r\n              class=\"hospital-link\"\r\n          >\r\n            {{ scope.row.name }}\r\n          </el-link>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 分页 -->\r\n    <el-pagination\r\n        background\r\n        layout=\"prev, pager, next\"\r\n        :current-page=\"currentPage\"\r\n        :page-size=\"pageSize\"\r\n        :total=\"totalHospitals\"\r\n        @current-change=\"handlePageChange\"\r\n        class=\"pagination-container\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\n\r\nexport default {\r\n  name: 'Reservation',\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\r\n      searchKeyword: '', // 搜索关键词\r\n      hospitalList: [], // 医院列表\r\n      currentPage: 1, // 当前页码\r\n      pageSize: 10, // 每页显示条数\r\n      totalHospitals: 0, // 总条数\r\n      isAppointment: this.$route.query.isAppointment,\r\n      isLoading: false, // 数据加载状态\r\n    };\r\n  },\r\n  created() {\r\n    this.fetchHospitalList(1); // 初始化加载医院列表\r\n  },\r\n  methods: {\r\n    // 获取医院列表\r\n    fetchHospitalList(pageNumber) {\r\n      this.isLoading = true;\r\n      this.currentPage = pageNumber;\r\n      this.$request.get('/hospital/selectPage', {\r\n        params: {\r\n          pageNum: this.currentPage,\r\n          pageSize: this.pageSize,\r\n          name: this.searchKeyword,\r\n        },\r\n      })\r\n          .then((response) => {\r\n            if (response.data && response.data.list) {\r\n              this.hospitalList = response.data.list;\r\n            }\r\n            if (response.data && response.data.total) {\r\n              this.totalHospitals = response.data.total;\r\n            }\r\n          })\r\n          .catch((error) => {\r\n            console.error('获取医院列表失败:', error);\r\n            this.$message.error('获取医院列表失败，请稍后重试');\r\n          })\r\n          .finally(() => {\r\n            this.isLoading = false;\r\n          });\r\n    },\r\n    // 重置搜索\r\n    resetSearch() {\r\n      this.searchKeyword = '';\r\n      this.fetchHospitalList(1);\r\n    },\r\n    // 分页切换\r\n    handlePageChange(newPage) {\r\n      this.fetchHospitalList(newPage);\r\n    },\r\n    // 跳转到医院详情页面\r\n    goToHospitalDetail(hospitalId) {\r\n      const isAppointment = this.$route.query.isAppointment;\r\n      this.$router.push({\r\n        path: `/appointment-registration/hospital/${hospitalId}`,\r\n        query: {\r\n          isAppointment: isAppointment,\r\n        },\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.search-container {\r\n  display: flex;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.search-input {\r\n  flex: 1;\r\n  margin-right: 10px;\r\n}\r\n\r\n.search-button {\r\n  background-color: #409eff;\r\n  color: white;\r\n}\r\n\r\n.loading-container {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  height: 50px;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.hospital-table {\r\n  width: 100%;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.hospital-link {\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination-container {\r\n  display: flex;\r\n  justify-content: center;\r\n}\r\n</style>"],"mappings":";;EAGSA,KAAK,EAAC;AAAkB;;;EAiBPA,KAAK,EAAC;;;EAQd,YAAU,EAAC;AAAO;;;;;;;;;uBA3BlCC,mBAAA,CAiDM,cAhDJC,mBAAA,SAAY,EACZC,mBAAA,CAcM,OAdNC,UAcM,GAbJC,YAAA,CAKEC,mBAAA;gBAJWC,KAAA,CAAAC,aAAa;+DAAbD,KAAA,CAAAC,aAAa,GAAAC,MAAA;IACtBC,WAAW,EAAC,SAAS;IACpBC,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,SAAA,CAAAJ,MAAA,IAAQK,QAAA,CAAAC,iBAAiB;IAC/Bf,KAAK,EAAC;2CAEVK,YAAA,CAMYW,oBAAA;IALPC,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAH,MAAA,IAAEK,QAAA,CAAAC,iBAAiB;IACzBf,KAAK,EAAC,eAAe;IACrBkB,IAAI,EAAC;;sBACR,MAEDN,MAAA,QAAAA,MAAA,O,iBAFC,MAED,E;;QAGFV,mBAAA,aAAgB,EACLK,KAAA,CAAAY,SAAS,I,cAApBlB,mBAAA,CAGM,OAHNmB,UAGM,GAFJf,YAAA,CAAcgB,qBAAA,G,0BACdlB,mBAAA,CAAsB,cAAhB,WAAS,qB,wCAGjBD,mBAAA,UAAa,EACbG,YAAA,CAYWiB,mBAAA;IAZAC,IAAI,EAAEhB,KAAA,CAAAiB,YAAY;IAAEC,MAAM,EAAN,EAAM;IAACzB,KAAK,EAAC;;sBAC1C,MAUkB,CAVlBK,YAAA,CAUkBqB,0BAAA;MAVDC,IAAI,EAAC,MAAM;MAACC,KAAK,EAAC;;wBACjC,MAQW,CARXzB,mBAAA,CAQW,YARX0B,UAQW,GAPTxB,YAAA,CAMUyB,kBAAA;QALNC,IAAI,EAAC,SAAS;QACbd,OAAK,EAAAL,MAAA,QAAAA,MAAA,MAAAH,MAAA,IAAEK,QAAA,CAAAkB,kBAAkB,CAACC,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACC,EAAE;QACvCpC,KAAK,EAAC;;0BAER,MAAoB,C,kCAAjBiC,IAAA,CAAAC,KAAK,CAACC,GAAG,CAACE,IAAI,iB;;;;;;;;;+BAMzBnC,mBAAA,QAAW,EACXG,YAAA,CAQEiC,wBAAA;IAPEC,UAAU,EAAV,EAAU;IACVC,MAAM,EAAC,mBAAmB;IACzB,cAAY,EAAEjC,KAAA,CAAAkC,WAAW;IACzB,WAAS,EAAElC,KAAA,CAAAmC,QAAQ;IACnBC,KAAK,EAAEpC,KAAA,CAAAqC,cAAc;IACrBC,eAAc,EAAE/B,QAAA,CAAAgC,gBAAgB;IACjC9C,KAAK,EAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}