{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"app-container\"\n};\nconst _hoisted_2 = {\n  slot: \"header\",\n  class: \"clearfix\"\n};\nconst _hoisted_3 = {\n  slot: \"footer\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_el_card, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"医院动态管理\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n      type: \"primary\",\n      size: \"small\",\n      onClick: $options.showAddDialog,\n      style: {\n        \"float\": \"right\"\n      }\n    }, {\n      default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\" 发布新动态 \")])),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]), _createVNode(_component_el_table, {\n      data: $data.noticeList,\n      border: \"\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_table_column, {\n        prop: \"title\",\n        label: \"标题\",\n        width: \"200\"\n      }), _createVNode(_component_el_table_column, {\n        prop: \"publishTime\",\n        label: \"发布时间\",\n        width: \"120\"\n      }), _createVNode(_component_el_table_column, {\n        label: \"状态\",\n        width: \"80\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_tag, {\n          type: scope.row.status === 0 ? 'success' : 'info'\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(scope.row.status === 0 ? '显示' : '隐藏'), 1 /* TEXT */)]),\n\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"type\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_table_column, {\n        label: \"操作\",\n        width: \"120\"\n      }, {\n        default: _withCtx(scope => [_createVNode(_component_el_button, {\n          size: \"mini\",\n          onClick: $event => $options.toggleStatus(scope.row.id)\n        }, {\n          default: _withCtx(() => [_createTextVNode(_toDisplayString(scope.row.status === 0 ? '隐藏' : '显示'), 1 /* TEXT */)]),\n\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"data\"])]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 添加动态对话框 \"), _createVNode(_component_el_dialog, {\n    title: \"发布新动态\",\n    visible: $data.dialogVisible,\n    width: \"50%\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $data.notice,\n      \"label-width\": \"80px\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"标题\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.notice.title,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.notice.title = $event),\n          maxlength: \"50\",\n          \"show-word-limit\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"内容\"\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"textarea\",\n          modelValue: $data.notice.content,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.notice.content = $event),\n          rows: 5,\n          maxlength: \"500\",\n          \"show-word-limit\": \"\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"]), _createElementVNode(\"span\", _hoisted_3, [_createVNode(_component_el_button, {\n      onClick: _cache[2] || (_cache[2] = $event => $data.dialogVisible = false)\n    }, {\n      default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"取消\")])),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.submitNews\n    }, {\n      default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"发布\")])),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"])]);\n}","map":{"version":3,"names":["class","slot","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","_createElementVNode","_hoisted_2","_component_el_button","type","size","onClick","$options","showAddDialog","style","_cache","_component_el_table","data","$data","noticeList","border","_component_el_table_column","prop","label","width","default","_withCtx","scope","_component_el_tag","row","status","$event","toggleStatus","id","_createCommentVNode","_component_el_dialog","title","visible","dialogVisible","_component_el_form","model","notice","_component_el_form_item","_component_el_input","maxlength","content","rows","_hoisted_3","submitNews"],"sources":["E:\\专业设计项目\\HRS\\HRS-7\\vue\\src\\views\\hospitalAdmin\\Notice.vue"],"sourcesContent":["<template>\r\n  <div class=\"app-container\">\r\n    <el-card>\r\n      <div slot=\"header\" class=\"clearfix\">\r\n        <span>医院动态管理</span>\r\n        <el-button\r\n            type=\"primary\"\r\n            size=\"small\"\r\n            @click=\"showAddDialog\"\r\n            style=\"float: right\"\r\n        >\r\n          发布新动态\r\n        </el-button>\r\n      </div>\r\n\r\n      <el-table :data=\"noticeList\" border>\r\n        <el-table-column prop=\"title\" label=\"标题\" width=\"200\" />\r\n        <el-table-column prop=\"publishTime\" label=\"发布时间\" width=\"120\" />\r\n        <el-table-column label=\"状态\" width=\"80\">\r\n          <template #default=\"scope\">\r\n            <el-tag :type=\"scope.row.status === 0 ? 'success' : 'info'\">\r\n              {{ scope.row.status === 0 ? '显示' : '隐藏' }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"120\">\r\n          <template #default=\"scope\">\r\n            <el-button\r\n                size=\"mini\"\r\n                @click=\"toggleStatus(scope.row.id)\"\r\n            >\r\n              {{ scope.row.status === 0 ? '隐藏' : '显示' }}\r\n            </el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n\r\n    <!-- 添加动态对话框 -->\r\n    <el-dialog title=\"发布新动态\" :visible.sync=\"dialogVisible\" width=\"50%\">\r\n      <el-form :model=\"notice\" label-width=\"80px\">\r\n        <el-form-item label=\"标题\">\r\n          <el-input v-model=\"notice.title\" maxlength=\"50\" show-word-limit />\r\n        </el-form-item>\r\n        <el-form-item label=\"内容\">\r\n          <el-input\r\n              type=\"textarea\"\r\n              v-model=\"notice.content\"\r\n              :rows=\"5\"\r\n              maxlength=\"500\"\r\n              show-word-limit\r\n          />\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\">\r\n        <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitNews\">发布</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      user: JSON.parse(localStorage.getItem(\"xm-user\") || '{}'),\r\n      noticeList: [],\r\n      dialogVisible: false,\r\n      notice: {\r\n        title: '',\r\n        content: '',\r\n        hospitalId: '',\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    loadNews() {\r\n      this.$request.get('/admin/selectNotice',{\r\n        params:{\r\n          id:this.user.id,\r\n          pageNum:1,\r\n          pageSize:10\r\n        }\r\n      })\r\n          .then(res => {\r\n            this.noticeList = res.data.list;\r\n          });\r\n    },\r\n    showAddDialog() {\r\n      this.notice = { title: '', content: '' };\r\n      this.dialogVisible = true;\r\n    },\r\n    submitNews() {\r\n      this.notice.hospitalId = this.user.id;\r\n      this.$request.post('/admin/addNotice', this.notice)\r\n          .then(() => {\r\n            this.$message.success('发布成功');\r\n            this.dialogVisible = false;\r\n            this.loadNews();\r\n          });\r\n    },\r\n    toggleStatus(id) {\r\n      this.$request.post(`/admin/toggleNewsStatus/${id}`)\r\n          .then(() => {\r\n            this.$message.success('状态已更新');\r\n            this.loadNews();\r\n          });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.loadNews();\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n/* 保持与系统一致的极简样式 */\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}